## 序列行情函数

### HIGH 最高价

```pascal
返回该周期最高价.
用法:
 HIGH
```

### H 最高价

```pascal
返回该周期最高价.
用法:
 同HIGH
```

### LOW 最低价

```pascal
返回该周期最低价.
用法:
 LOW
```

### L 最低价

```pascal
返回该周期最低价.
用法:
 同LOW
```

### CLOSE 收盘价

```pascal
返回该周期收盘价.
用法:
 CLOSE
```

### C 收盘价

```pascal
返回该周期收盘价.
用法:
 同CLOSE
```

### VOL 成交量(手)

```pascal
返回该周期成交量.
用法:
 VOL
```

### V 成交量(手)

```pascal
返回该周期成交量.
用法:
 同VOL
```

### OPEN 开盘价

```pascal
返回该周期开盘价.
用法:
 OPEN
```

### O 开盘价

```pascal
返回该周期开盘价.
用法:
 同OPEN
```

### ADVANCE 上涨家数

```pascal
返回该周期上涨家数.
用法:
 ADVANCE(本函数仅对沪深指数有效)
```

### DECLINE 下跌家数

```pascal
返回该周期下跌家数.
用法:
 DECLINE(本函数仅对沪深指数有效)
```

### AMOUNT 成交额(元)

```pascal
返回该周期成交额.期货和期权无成交金额
用法:
 AMOUNT
```

### AMO 成交额(元)

```pascal
返回该周期成交额.期货和期权无成交金额
用法:
 AMOUNT
```

### ZSTJJ 分时图均价

```pascal
返回该周期的分时图均价线,对于分时图周期指标有效.
用法:
 ZSTJJ
```

### VOLINSTK 持仓量

```pascal
返回该周期持仓量,对于期货和期权有意义.
用法:
 VOLINSTK
```

### QHJSJ 结算价

```pascal
返回该周期结算价,对于期货和期权有意义.
用法:
 QHJSJ
```

### HKSHORTVOL 抛空量

```pascal
返回该周期抛空量,对于港股有意义.
用法:
 HKSHORTVOL
```

### DHIGH 不定周期最高价

```pascal
返回该不定周期最高价,属于未来函数.
用法:
 DHIGH
```

### DOPEN 不定周期开盘价

```pascal
返回该不定周期开盘价,属于未来函数.
用法:
 DOPEN
```

### DLOW 不定周期最低价

```pascal
返回该不定周期最低价,属于未来函数.
用法:
 DLOW
```

### DCLOSE 不定周期收盘价

```pascal
返回该不定周期收盘价,属于未来函数.
用法:
 DCLOSE
```

### DVOL 不定周期成交量

```pascal
返回该不定周期成交量价,属于未来函数.
用法:
 DVOL
```

## 时间函数

### PERIOD 周期类型

```pascal
取得周期类型.
结果从0到13,依次分别是1/5/15/30/60分钟,日/周/月,多分钟,多日/季/年,5秒线/多秒线,13以上为自定义周期
```

### DATE 日期

```pascal
取得该周期从1900以来的的年月日.
用法:
 DATE
 例如函数返回1000101,表示2000年1月1日,DATE+19000000后才是真正的日期值
```

### TIME 时间(时分)

```pascal
取得该周期的时分,适用于日线以下周期
用法:
 TIME
 函数返回有效值范围为(0000-2359)
```

### TIME2 时间(时分秒)

```pascal
取得该周期的时分秒,适用于日线以下周期.
用法:
 TIME2
 函数返回有效值范围为(000000-235959)
```

### YEAR 年份

```pascal
取得该周期的年份.
用法:
 YEAR

注:YEAR关键字也可用于跨周期年线引用
```

### MONTH 月份

```pascal
取得该周期的月份.
用法:
 MONTH
 函数返回有效值范围为(1-12)

注:MONTH关键字也可用于跨周期月线引用
```

### WEEKOFYEAR 年内星期

```pascal
取得该周是年内第几个周.
用法:
 WEEKOFYEAR

```

### WEEKDAY 星期

```pascal
取得该周期的星期数.
用法:
 WEEKDAY
 函数返回有效值范围为(1,2,3,4,5,6,0)
```

### DAYSTOTODAY 离今天的天数

```pascal
取得该周期的日期离今天的天数.
用法:
 DAYSTOTODAY

```

### DAY 日

```pascal
取得该周期的日期.
用法:
 DAY
 函数返回有效值范围为(1-31)

注:DAY关键字也可用于跨周期日线引用
```

### HOUR 小时

```pascal
取得该周期的小时数.
用法:
 HOUR
 函数返回有效值范围为(0-23),对于日线及更长的分析周期值为0
```

### MINUTE 分钟

```pascal
取得该周期的分钟数.
用法:
 MINUTE
 函数返回有效值范围为(0-59),对于日线及更长的分析周期值为0
```

### FROMOPEN 当前离开盘分钟数

```pascal
求该品种当前时刻已开盘有多长分钟.
用法:
 FROMOPEN
 FROMOPEN.返回当前时刻距开盘有多长时间(开市期间的相对时间),单位为分钟.
```

### TOTALFZNUM 总分钟数

```pascal
求该品种的每天的总交易分钟数.
用法:
 TOTALFZNUM
 TOTALFZNUM.返回当前品种的每天的总交易分钟数,单位为分钟.
```

### DATETODAY 转换天数

```pascal
指定日期到1990.12.19的天数.
用法:
 DATETODAY(date)
 DATETODAY(date).返回date到1990.12.19的天数.有效日期为(901219-1341231)
例如:
 DATETODAY(901219)返回0.
```

### DAYTODATE 转换日期

```pascal
求1990.12.19后第若干天的日期.
用法:
 DAYTODATE(N)
 DAYTODATE(N).返回1990.12.19后第N天的日期.有效天数为(0-20000)
例如:
 DAYTODATE(0)返回901219.
```

### TIMETOSEC 当日秒数

```pascal
求指定时刻距0时有多长时间.
用法:
 TIMETOSEC(time)
 TIMETOSEC(time).返回time时刻距0时有多长时间,单位为秒.有效时间为(0-235959)
例如:
 TIMETOSEC(93000)返回34200.
```

### SECTOTIME 转换时间

```pascal
求0时后若干秒是什么时间.
用法:
 SECTOTIME(N)
 SECTOTIME(N).返回0时后N秒是什么时间.有效秒数为(0-86399)
例如:
 SECTOTIME(34200)返回93000.
```

### MACHINEDATE 当前系统的日期

```pascal
取得当前客户端机器从1900以来的的年月日,比如2016年10月1日为:01161001,MACHINEDATE+19000000后才是真正的日期值
```

### MACHINETIME 当前系统的时间

```pascal
取得当前客户端机器的时间,比如11:01:15时为110115
```

### MACHINEWEEK 当前系统的星期

```pascal
取得当前客户端机器为星期几(1,2,3,4,5,6,0)
```

## 引用函数

### DRAWNULL 无效数

```pascal
返回无效数.
用法:
 DRAWNULL
例如:
 IF(CLOSE>REF(CLOSE,1),CLOSE,DRAWNULL)表示下跌时不画线
```

### BACKSET 向前赋值

```pascal
属于未来函数,将当前位置到若干周期前的数据设为1.
用法:
 BACKSET(X,N),若X非0,则将当前位置到N周期前的数值设为1.
 例如:
 BACKSET(CLOSE>OPEN,2)若收阳则将该周期及前一周期数值设为1,否则为0
```

### ALIGNRIGHT 有效数据右对齐

```pascal
有效数据右对齐.
用法:
 ALIGNRIGHT(X)有效数据向右移动,左边空出来的周期填充无效值
例如:TC:=IF(CURRBARSCOUNT=2 || CURRBARSCOUNT=5,DRAWNULL,C);XC:ALIGNRIGHT(TC);删除了两天的收盘价,并将剩余数据右移
```

### BARSCOUNT 有效数据周期数

```pascal
求总的周期数.
用法:
 BARSCOUNT(X)第一个有效数据到当前的天数
例如:BARSCOUNT(CLOSE)对于日线数据取得上市以来总交易日数
```

### BARSTATUS 数据位置状态

```pascal
BARSTATUS返回数据位置信息,1表示第一根K线,2表示最后一个数据,0表示中间位置.
例如:
 BARSTATUS=2表示当天是该数据的最后一个周期.
```

### CURRBARSCOUNT 到最后交易的周期

```pascal
求到最后交易日的周期数.
用法:
 CURRBARSCOUNT 求到最后交易日的周期数

```

### TOTALBARSCOUNT 总的周期数

```pascal
求总的周期数.
用法:
 TOTALBARSCOUNT 求总的周期数

```

### ISLASTBAR 是否最后一个周期

```pascal
判断是否为最后一个周期.
用法:
 ISLASTBAR 判断是否为最后一个周期

```

### BARSLAST 上一条件成立位置

```pascal
上一次条件成立到当前的周期数.
用法:
 BARSLAST(X):上一次X不为0到现在的天数
例如:
 BARSLAST(CLOSE/REF(CLOSE,1)>=1.1)表示上一个涨停板到当前的周期数
```

### BARSNEXT 下一条件成立位置

```pascal
属于未来函数,下一次条件成立到当前的周期数.
用法:
 BARSNEXT(X):下一次X不为0到现在的天数
例如:
 BARSNEXT(CLOSE/REF(CLOSE,1)>=1.1)表示下一个涨停板到当前的周期数
```

### BARSSINCEN N 周期内首个条件成立位置

```pascal
N周期内第一个条件成立到当前的周期数.
用法:
 BARSSINCEN(X,N):N周期内第一次X不为0到现在的天数,N为常量
例如:
 BARSSINCEN(HIGH>10,10)表示10个周期内股价超过10元时到当前的周期数
```

### BARSSINCE 首个条件成立位置

```pascal
第一个条件成立到当前的周期数.
用法:
 BARSSINCE(X):第一次X不为0到现在的天数
例如:
 BARSSINCE(HIGH>10)表示股价超过10元时到当前的周期数
```

### COUNT 统计

```pascal
统计满足条件的周期数.
用法:
 COUNT(X,N),统计N周期中满足X条件的周期数,若N<0则从第一个有效值开始.
例如:
 COUNT(CLOSE>OPEN,20)表示统计20周期内收阳的周期数
```

### BARSLASTCOUNT 条件连续成立次数

```pascal
统计连续满足条件的周期数.
用法:
 BARSLASTCOUNT(X),统计连续满足X条件的周期数.
例如:
 BARSLASTCOUNT(CLOSE>OPEN)表示统计连续收阳的周期数
```

### HHV 最高值

```pascal
求最高值.
用法:
 HHV(X,N),求N周期内X最高值,N=0则从第一个有效值开始.
例如:
 HHV(HIGH,30)表示求30日最高价
```

### HHVBARS 上一高点位置

```pascal
求上一高点到当前的周期数.
用法:
 HHVBARS(X,N):求N周期内X最高值到当前周期数,N=0表示从第一个有效值开始统计
例如:
 HHVBARS(HIGH,0)求得历史新高到到当前的周期数
```

### HOD 高值名次

```pascal
求高值名次.
用法:
 HOD(X,N):求当前X数据是N周期内的第几个高值,N=0则从第一个有效值开始.
例如:
 HOD(HIGH,20)返回是20日的第几个高价
```

### LLV 最低值

```pascal
求最低值.
用法:
 LLV(X,N),求N周期内X最低值,N=0则从第一个有效值开始.
例如:
 LLV(LOW,0)表示求历史最低价
```

### LLVBARS 上一低点位置

```pascal
求上一低点到当前的周期数.
用法:
 LLVBARS(X,N):求N周期内X最低值到当前周期数,N=0表示从第一个有效值开始统计
例如:
 LLVBARS(HIGH,20)求得20日最低点到当前的周期数
```

### LOD 低值名次

```pascal
求低值名次.
用法:
 LOD(X,N):求当前X数据是N周期内的第几个低值,N=0则从第一个有效值开始.
例如:
 LOD(LOW,20)返回是20日的第几个低价
```

### REVERSE 求相反数

```pascal
求相反数.
用法:
 REVERSE(X)返回-X.
例如:
 REVERSE(CLOSE)返回-CLOSE
```

### REF 日前的

```pascal
引用若干周期前的数据(平滑处理).
用法:
 REF(X,A),引用A周期前的X值.A可以是变量.
平滑处理:当引用不到数据时进行的操作.此函数中,平滑时使用上一个周期的引用值.
例如:
 REF(CLOSE,BARSCOUNT(C)-1)表示第二根K线的收盘价.
```

### REFX 日后的

```pascal
属于未来函数,引用若干周期后的数据(平滑处理).
用法:
 REFX(X,A),引用A周期后的X值.A可以是变量.
平滑处理:当引用不到数据时进行的操作.此函数中,平滑时使用上一个周期的引用值.
例如:
 TT:=IF(C>O,1,2);
 REFX(CLOSE,TT);表示阳线引用下一周期的收盘价,阴线引用日后第二周期的收盘价.
```

### REFV 日前的(未作平滑处理)

```pascal
引用若干周期前的数据(未作平滑处理).
用法:
 REFV(X,A),引用A周期前的X值.A可以是变量.
平滑处理:当引用不到数据时进行的操作.
例如:
 REFV(CLOSE,BARSCOUNT(C)-1)表示第二根K线的收盘价.
```

### REFXV 日后的(未作平滑处理)

```pascal
属于未来函数,引用若干周期后的数据(未作平滑处理).
用法:
 REFXV(X,A),引用A周期后的X值.A可以是变量.
平滑处理:当引用不到数据时进行的操作.
例如:
 REFXV(CLOSE,1)表示下一周期的收盘价,在日线上就是明天收盘价
```

### REFDATE 日

```pascal
引用自1900年以来指定日期的数据.
用法:
 REFDATE(X,A),引用A日期的X值.
例如:
 REFDATE(CLOSE,1011208)表示2001年12月08日的收盘价
```

### CALCSTOCKINDEX 指标引用

```pascal
指标引用.
用法:CALCSTOCKINDEX(品种代码,指标名称,指标线),返回该指标相应输出的计算值.
例如:
 CALCSTOCKINDEX('SH600000','KDJ',3)表示上证600000的KDJ指标第3个输出即J之值,第一个参数可在前面加SZ(深市),SH(沪市),或市场_,,
CALCSTOCKINDEX('47_IFL0','MACD',2)表示IFL0品种的MACD指标第2个输出值.

注意:引用品种的对应周期的数据必须要先下载到本地
```

### SUM 累和

```pascal
求总和.
用法:
 SUM(X,N),统计N周期中X的总和,N=0则从第一个有效值开始.
例如:
 SUM(VOL,0)表示统计从上市第一天以来的成交量总和
```

### MULAR 累乘

```pascal
求累乘.
用法:
 MULAR(X,N),统计N周期中X的乘积.N=0则从第一个有效值开始.
例如:
 MULAR(C/REF(C,1),0)表示统计从上市第一天以来的复利
```

### FILTER 过滤

```pascal
过滤连续出现的信号.
用法:FILTER(X,N):X满足条件后,将其后N周期内的数据置为0,N为常量.
例如:
 FILTER(CLOSE>OPEN,5)查找阳线,5天内再次出现的阳线不被记录在内
```

### FILTERX 反向过滤

```pascal
反向过滤连续出现的信号.
用法:FILTERX(X,N):X满足条件后,将其前N周期内的数据置为0,N为常量.
例如:
 FILTERX(CLOSE>OPEN,5)查找阳线,前5天内出现过的阳线不被记录在内
```

### TFILT 区间过滤

```pascal
对指定时间段的数据进行过滤,该时间段以外的数据无效.
用法:
 TFILT(X,D1,M1,D2,M2)
例如:
 TFILT(CLOSE,1040101,1025,1040101,1345)表示在2004年1月1日的10:25到2004年1月1日的13:45的收盘价是有效的.
周期以日为基本单位的,分时为0有效.
```

### TFILTER 信号过滤(多头)

```pascal
过滤连续出现的信号.
用法:TFILTER(买入条件,卖出条件,N);过滤掉买入(卖出)信号发出后,下一个反向信号发出前的所有买入(卖出)信号.

N=1表示仅对买入信号过滤;
N=2表示仅对卖出信号过滤;
N=0表示对买入和卖出信号都过滤,返回1,2表示买入或卖出条件成立;
同一K线上只能有一个信号;

例如:
ENTERLONG:TFILTER(买入,卖出,1);
EXITLONG:TFILTER(买入,卖出,2);
```

### TTFILTER 信号过滤(多空)

```pascal
按照开平配对等原则过滤不合理的信号.
用法:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,N);

主要规则有:
1.连续的同方向指令只有第一个有效,其他的将被过滤;
2.交易信号必须配对出现(比如前面已经有了买开指令,则后面只允许出现卖平指令,其他的指令都被过滤掉);

N=1表示仅对买入开仓信号过滤;
N=2表示仅对卖出平仓信号过滤;
N=3表示仅对卖出开仓信号过滤;
N=4表示仅对买入平仓信号过滤;
N=0表示都过滤,返回1,2,3,4分别表示对应的条件成立;
同一K线上只能有一个信号;

例如:
ENTERLONG:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,1);
EXITLONG:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,2);
ENTERSHORT:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,3);
EXITSHORT:TTFILTER(买入开仓,卖出平仓,卖出开仓,买入平仓,4);
```

### TR 真实波幅

```pascal
求真实波幅.
用法:
 TR,求真实波幅.
 例如:ATR:=MA(TR,10);
 表示求真实波幅的10周期均值

```

### SUMBARS 累加到指定值的周期数

```pascal
向前累加到指定值到现在的周期数.
用法:
 SUMBARS(X,A):将X向前累加直到大于等于A,返回这个区间的周期数
 例如:SUMBARS(VOL,CAPITAL)求完全换手到现在的周期数
```

### MA 简单移动平均

```pascal
返回简单移动平均
用法:
 MA(X,N):X的N日简单移动平均,算法(X1+X2+X3+...+Xn)/N,N支持变量
```

### SMA 移动平均

```pascal
返回移动平均
用法:
 SMA(X,N,M):X的N日移动平均,M为权重,如Y=(X*M+Y'*(N-M))/N
```

### TMA 移动平均

```pascal
返回移动平均
用法:
 TMA(X,A,B),A和B必须小于1,算法	Y=(A*Y'+B*X),其中Y'表示上一周期Y值.初值为X
```

### MEMA 平滑移动平均

```pascal
返回平滑移动平均
用法:
 MEMA(X,N):X的N日平滑移动平均,如Y=(X+Y'*(N-1))/N
 MEMA(X,N)相当于SMA(X,N,1)
```

### EMA 指数移动平均

```pascal
返回指数移动平均
用法:
 EMA(X,N):X的N日指数移动平均.算法:Y=(X*2+Y'*(N-1))/(N+1)
 EMA(X,N)相当于SMA(X,N+1,2),N支持变量
```

### EXPMA 指数移动平均

```pascal
与EMA的用法一致
```

### EXPMEMA 指数平滑移动平均

```pascal
返回指数平滑移动平均
用法:
 EXPMEMA(X,N):X的N日指数平滑移动平均
 EXPMEMA同EMA(EXPMA)的差别在于他的起始值为一平滑值
```

### WMA 加权移动平均

```pascal
返回加权移动平均
用法:
 WMA(X,N):X的N日加权移动平均.算法:Yn=(1*X1+2*X2+...+n*Xn)/(1+2+...+n)
```

### DMA 动态移动平均

```pascal
求动态移动平均.
用法:
 DMA(X,A),求X的动态移动平均.
算法:Y=A*X+(1-A)*Y',其中Y'表示上一周期Y值,A必须大于0且小于1.A支持变量.
例如:
 DMA(CLOSE,VOL/CAPITAL)表示求以换手率作平滑因子的平均价
```

### AMA 自适应均线

```pascal
求自适应均线值.
用法:
 AMA(X,A),A为自适应系数,必须小于1.
算法:
 Y=Y'+A*(X-Y').初值为X
```

### XMA 偏移移动平均

```pascal
属于未来函数,返回偏移移动平均
用法:
 XMA(X,N):X的N日偏移移动平均,用到了当日以后N/2日的数据,N支持变量,只供内部测试使用
```

### RANGE 介于某个范围之间

```pascal
RANGE(A,B,C):A在B和C范围之间,B<A<C.
用法:
 RANGE(A,B,C)表示A大于B同时小于C时返回1,否则返回0
```

### CONST 取值设为常数

```pascal
CONST(A):取A最后的值为常量.
用法:
 CONST(INDEXC)表示取指数现价
```

### TOPRANGE 当前值是近多少周期内的最大值

```pascal
当前值是近多少周期内的最大值.
用法:
 TOPRANGE(X):X是近多少周期内X的最大值
例如:
 TOPRANGE(HIGH)表示当前最高价是近多少周期内最高价的最大值
```

### LOWRANGE 当前值是近多少周期内的最小值

```pascal
当前值是近多少周期内的最小值.
用法:
 LOWRANGE(X):X是近多少周期内X的最小值
例如:
 LOWRANGE(LOW)表示当前最低价是近多少周期内最低价的最小值
```

### FINDHIGH 寻找指定周期内的特定最大值

```pascal
N周期前的M周期内的第T个最大值.
用法:
 FINDHIGH(VAR,N,M,T):VAR在N日前的M天内第T个最高价
```

### FINDHIGHBARS 寻找指定周期内的特定最大值到当前的周期数

```pascal
N周期前的M周期内的第T个最大值到当前周期的周期数.
用法:
 FINDHIGHBARS(VAR,N,M,T):VAR在N日前的M天内第T个最高价到当前周期的周期数
```

### FINDLOW 寻找指定周期内的特定最小值

```pascal
N周期前的M周期内的第T个最小值.
用法:
 FINDLOW(VAR,N,M,T):VAR在N日前的M天内第T个最低价
```

### FINDLOWBARS 寻找指定周期内的特定最小值到当前的周期数

```pascal
N周期前的M周期内的第T个最小值到当前周期的周期数.
用法:
 FINDLOWBARS(VAR,N,M,T):VAR在N日前的M天内第T个最低价到当前周期的周期数.
```

### EXTERNSTR 引用自定义外部字符串数据

```pascal
EXTERNSTR(TYPE,ID)
TYPE为1表示是系统保留数据,
TYPE为0表示是自定义外部数据,读取signals目录下面的的extern_user.txt,请用自定义数据管理器来维护
 extern_user.txt为文本结构,如下 1|600717|1|好股|0.33
市场(0:深圳,1:上海)|品种代码|数据号|文字串|数值 如果是导出格式,则不需要数据号

```

### EXTERNVALUE 引用自定义外部数值数据

```pascal
EXTERNVALUE(TYPE,ID),用法同EXTERNSTR类似
```

### SIGNALS_SYS 引用自定义序列数据(系统)

```pascal
引用自定义序列数据(系统)
```

### SIGNALS_USER 引用自定义序列数据

```pascal
引用自定义序列数据.
读取个人目录下的signals目录下面的[signals_user_?]目录,请用自定义数据管理器来维护.
SIGNALS_USER(11,TYPE):表示读当前品种的11数据号的序列数据,TYPE:为1表示做平滑处理,没有自定义数据的周期返回上一周期的值;为0表示不做平滑处理.
```

### EXTDATA_USER 引用扩展数据

```pascal
引用扩展数据.
请用扩展数据管理器来设置和刷新数据.
EXTDATA_USER(N,TYPE),N取(1-100),表示读当前品种的N号扩展序列数据,TYPE:为1表示做平滑处理,没有自定义数据的周期返回上一周期的值;为0表示不做平滑处理.
```

### SPLIT 除权除息数据

```pascal
除权除息数据
SPLIT(N,TYPE),取得之前第N次除息除权(送转股,分红)的除权除息数据,参数为0表示送转股的比例(送转/(送转+10)),1表示每股分红(分红/10)),例如:SPLIT(0,0)=0.5表示最近一次除权可能是10送10
```

### SPLITBARS 除权除息到现在的周期数

```pascal
除权除息到现在的周期数
SPLITBARS(N,TYPE),取得之前第N次除权除息到当前的周期数,参数为0表示送转股,1表示分红,2表示送转股或分红,例如:SPLITBARS(0,0)=0表示当天发生除权
```

### ZTPRICE 计算涨停价

```pascal
返回涨停价
用法:
 ZTPRICE(REF(CLOSE,1),0.1):按10%计算得到在昨收盘基础上的涨停价(对于复权序列K线,由于复权处理,根据前一天的收盘价计算结果可能与涨停价不符)
比如:
 ZTPrice(REF(QHJSJ,1),0.1),得到期货的涨停价
```

### DTPRICE 计算跌停价

```pascal
返回跌停价
用法:
 DTPRICE(REF(CLOSE,1),0.1):按10%计算得到在昨收盘基础上的跌停价(对于复权序列K线,由于复权处理,根据前一天的收盘价计算结果可能与跌停价不符)
比如:
 DTPrice(REF(QHJSJ,1),0.6),得到期货的跌停价(跌停比例为0.6的话)
```

### TDXDLL1 第 1 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL1(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL2 第 2 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL2(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL3 第 3 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL3(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL4 第 4 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL4(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL5 第 5 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL5(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL6 第 6 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL6(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL7 第 7 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL7(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL8 第 8 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL8(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL9 第 9 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL9(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### TDXDLL10 第 10 号 DLL

```pascal
调用DLL中的函数.
用法:
 DLL10(funcid,param1,param2,param3),funcid为数字,表示调用dll函数编号.
```

### USERFUNC0 DLL 函数(无参数)

```pascal
调用DLL中的函数,DLL中内部对应定义.
用法:
 USERFUNC0
```

### USERFUNC1 DLL 函数(1 参数)

```pascal
调用DLL中的函数,DLL中内部对应定义.
用法:
 USERFUNC1(param1)
```

### USERFUNC2 DLL 函数(2 参数)

```pascal
调用DLL中的函数,DLL中内部对应定义.
用法:
 USERFUNC2(param1,param2)
```

### USERFUNC3 DLL 函数(3 参数)

```pascal
调用DLL中的函数,DLL中内部对应定义.
用法:
 USERFUNC3(param1,param2,param3)
```

### USERFUNC4 DLL 函数(4 参数)

```pascal
调用DLL中的函数,DLL中内部对应定义.
用法:
 USERFUNC4(param1,param2,param3,param4)
```

## 板块字符函数

### CODE 品种代码

```pascal
返回品种代码.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,CODE);在屏幕左上角显示品种代码
```

### STKNAME 品种名称

```pascal
返回品种名称.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,STKNAME);在屏幕左上角显示品种名称
```

### HYBLOCK 所属行业(字串)

```pascal
返回品种所属行业.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,HYBLOCK);在屏幕左上角显示所属行业板块
```

### DYBLOCK 所属地域(字串)

```pascal
返回品种所属地域.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,DYBLOCK);在屏幕左上角显示所属地域板块
```

### GNBLOCK 所属概念板块(字串)

```pascal
返回所属概念板块.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,GNBLOCK);在屏幕左上角显示所属概念板块
```

### FGBLOCK 所属风格板块(字串)

```pascal
返回所属风格板块.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,FGBLOCK);在屏幕左上角显示所属风格板块
```

### ZSBLOCK 所属指数板块(字串)

```pascal
返回所属指数板块.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,ZSBLOCK);在屏幕左上角显示所属指数板块
```

### ZHBLOCK 所属组合板块(字串)

```pascal
返回所属组合板块.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,ZHBLOCK);在屏幕左上角显示所属组合板块
```

### ZDBLOCK 所属自定义板块(字串)

```pascal
返回所属自定义板块.
用法:
 DRAWTEXT_FIX(ISLASTBAR,0,0,0,ZDBLOCK);在屏幕左上角显示所属自定义板块
```

### GNBLOCKNUM 所属概念板块(个数)

```pascal
返回所属概念板块的个数,比如:IF(GNBLOCKNUM>5,1,0);.
```

### FGBLOCKNUM 所属风格板块(个数)

```pascal
返回所属风格板块的个数.
```

### ZSBLOCKNUM 所属指数板块(个数)

```pascal
返回所属指数板块的个数.
```

### ZHBLOCKNUM 所属组合板块(个数)

```pascal
返回所属组合板块的个数.
```

### ZDBLOCKNUM 所属自定义板块(个数)

```pascal
返回所属自定义板块的个数
```

### HYZSCODE 所属行业的板块指数代码

```pascal
返回品种所属行业的板块指数代码.比如: CALCSTOCKINDEX(HYZSCODE,'KDJ',3);
```

### HYSYL 所属行业的市盈率

```pascal
返回品种所属行业的市盈率.
```

### INBLOCK 属于某板块

```pascal
返回品种是否属于某板块.
用法:
 if(INBLOCK('沪深300'),x,y);

板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,中小企业板,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确
```

### NAMELIKE 模糊匹配品种名称

```pascal
品种名称是否以参数开头.
用法:
 if(NAMELIKE('ST'),x,y);
```

### CODELIKE 模糊匹配品种代码

```pascal
品种代码是否以参数开头.
用法:
 if(CODELIKE('600'),x,y);
```

### NAMEINCLUDE 品种名称中包含

```pascal
品种名称中是否包含参数.
用法:
 if(NAMEINCLUDE('文化'),x,y);
```

### CON2STR 取值转为字符串

```pascal
CON2STR(A,N):取A最后的值(非序列值)转为字符串,小数位数N.
用法:
 CON2STR(FINANCE(20),3)表示取营业收入,以3位小数转为字符串
```

### VAR2STR 取值转为字符串(序列)

```pascal
VAR2STR(A,N):取A的每一个值转为字符串,小数位数N.
用法:
 VAR2STR(C,3)表示取收盘价,以3位小数转为字符串
```

### STR2CON 字符串转为数字

```pascal
STR2CON(S):将S字符串转化为数字.
用法:
 STR2CON('2365.02')表示将字符串'2365.02'转化为数字2365.02
```

### STRCAT 字符串相加

```pascal
STRCAT(A,B):将两个字符串A,B(非序列化)相加成一个字符串C.
用法:
 STRCAT('多头','开仓')将两个字符串'多头','开仓'相加成一个字符串'多头开仓'
```

### STRSPACE 字符串加一空格

```pascal
STRSPACE(A):字符串附带一空格
```

### VARCAT 字符串相加(序列)

```pascal
VARCAT(A,B):将两个字符串A,B相加成一个字符串C.
用法:
 DRAWTEXT(CLOSE>OPEN,LOW,VARCAT('多头',VAR2STR(C,2))) 将两个字符串相加成一个字符串并按条件显示出来
```

### STRCMP 字符串比较

```pascal
STRCMP(A,B):比较两个字符串A,B是否相等.
用法:
 STRCMP(HYBLOCK,'房地产')将成分股行业字符串与'房地产'比较,是否相等,如果相等表示属于房地产板块
```

### FINDSTR 字符串查找

```pascal
FINDSTR(A,B):在字符串A中查找字符串B,如果找到返回1,否则返回0.
用法:
 FINDSTR('多头开仓','开仓')在字符串'多头开仓'中查找字符串'开仓',返回1
```

## 逻辑函数

### CROSS 上穿

```pascal
两条线交叉.
用法:
 CROSS(A,B)表示当A从下方向上穿过B时返回1,否则返回0
例如:
 CROSS(MA(CLOSE,5),MA(CLOSE,10))表示5日均线与10日均线交金叉
```

### LONGCROSS 持续周期后上穿

```pascal
两条线维持一定周期后交叉.
 用法:LONGCROSS(A,B,N)表示A在N周期内都小于B,本周期从下方向上穿过B时返回1,否则返回0
```

### UPNDAY 连涨

```pascal
返回是否连涨周期数.
用法:
 UPNDAY(CLOSE,M)
 表示连涨M个周期,M为常量
```

### DOWNNDAY 连跌

```pascal
返回是否连跌周期.
用法:
 DOWNNDAY(CLOSE,M)
 表示连跌M个周期,M为常量
```

### NDAY 连大

```pascal
返回是否持续存在X>Y
用法:
 NDAY(CLOSE,OPEN,3)
 表示连续3日收阳线
```

### EXIST 存在

```pascal
是否存在.
例如:
 EXIST(CLOSE>OPEN,10)
 表示10日内存在着阳线
```

### EXISTR 存在

```pascal
EXISTR(X,A,B):是否存在(前几日到前几日间).
例如:
 EXISTR(CLOSE>OPEN,10,5)
 表示从前10日内到前5日内存在着阳线
 若A为0,表示从第一天开始,B为0,表示到最后日止
```

### EVERY 一直存在

```pascal
一直存在.
例如:
 EVERY(CLOSE>OPEN,N)
 表示N日内一直阳线(N应大于0,小于总周期数,N支持变量)
```

### LAST 持续存在

```pascal
LAST(X,A,B):持续存在.
例如:
 LAST(CLOSE>OPEN,10,5)
 表示从前10日到前5日内一直阳线
 若A为0,表示从第一天开始,B为0,表示到最后日止
```

### NOT 取反

```pascal
求逻辑非.
用法:
 NOT(X)返回非X,即当X=0时返回1,否则返回0
例如:
 NOT(ISUP)表示平盘或收阴
```

## 选择函数

### IF 条件判断

```pascal
根据条件求不同的值.
用法:
 IF(X,A,B)若X不为0则返回A,否则返回B
例如:
 IF(CLOSE>OPEN,HIGH,LOW)表示该周期收阳则返回最高值,否则返回最低值
```

### IFF 条件判断

```pascal
用法同IF一样
```

### IFN 条件反判断

```pascal
根据条件求不同的值,同IF判断相反.
用法:
 IFN(X,A,B)若X不为0则返回B,否则返回A
例如:
 IFN(CLOSE>OPEN,HIGH,LOW)表示该周期收阴则返回最高值,否则返回最低值
```

### IFC 条件判断,可中止

```pascal
根据条件求不同的值,可中止.
用法:
 IFC(X,A,B)若X不为0则返回A,否则返回B.IFC与IF函数的区别:根据X的值来选择性执行A、B表达式.
例如:
 IFC(CLOSE>OPEN,HIGH,TESTSKIP(1));L;表示当日收阳则返回最高值,并执行下一句"L;",否则退出公式计算
```

### VALUEWHEN 条件跟随

```pascal
VALUEWHEN(COND,X)
当COND条件成立时,取X的当前值,否则取VALUEWHEN的上个值.
```

### TESTSKIP 是否就此返回

```pascal
TESTSKIP(A):满足A则直接返回.
用法:
 TESTSKIP(A)
 表示如果满足条件A则该公式直接返回,不再计算接下来的表达式 注意:A为非序列数据,只取最后一个数据
```

## 数学函数

### MAX 较大值

```pascal
求最大值.
用法:
 MAX(A,B)返回A和B中的较大值
例如:
 MAX(CLOSE-OPEN,0)表示若收盘价大于开盘价返回它们的差值,否则返回0
```

### MIN 较小值

```pascal
求最小值.
用法:
 MIN(A,B)返回A和B中的较小值
例如:
 MIN(CLOSE,OPEN)返回开盘价和收盘价中的较小值
```

### ACOS 反余弦

```pascal
反余弦值.
用法:
 ACOS(X)返回X的反余弦值
```

### ASIN 反正弦

```pascal
反正弦值.
用法:
 ASIN(X)返回X的反正弦值
```

### ATAN 反正切

```pascal
反正切值.
用法:
 ATAN(X)返回X的反正切值
```

### COS 余弦

```pascal
余弦值.
用法:
 COS(X)返回X的余弦值
```

### SIN 正弦

```pascal
正弦值.
用法:
 SIN(X)返回X的正弦值
```

### TAN 正切

```pascal
正切值.
用法:
 TAN(X)返回X的正切值
```

### EXP 指数

```pascal
指数.
用法:
 EXP(X)为e的X次幂
例如:
 EXP(CLOSE)返回e的CLOSE次幂
```

### LN 自然对数

```pascal
求自然对数.
用法:
 LN(X)以e为底的对数
例如:
 LN(CLOSE)求收盘价的对数
```

### LOG 对数

```pascal
求10为底的对数.
用法:
 LOG(X)取得X的对数
例如:
 LOG(100)等于2
```

### SQRT 开方

```pascal
开平方.
用法:
 SQRT(X)为X的平方根
例如:
 SQRT(CLOSE)收盘价的平方根
```

### ABS 绝对值

```pascal
求绝对值.
用法:
 ABS(X)返回X的绝对值
例如:
 ABS(-34)返回34
```

### POW 乘幂

```pascal
乘幂.
用法:
 POW(A,B)返回A的B次幂
例如:
 POW(CLOSE,3)求得收盘价的3次方
```

### CEILING 向上舍入

```pascal
向上舍入.
用法:
 CEILING(A)返回沿A数值增大方向最接近的整数
例如:
 CEILING(12.3)求得13,CEILING(-3.5)求得-3
```

### FLOOR 向下舍入

```pascal
向下舍入.
用法:
 FLOOR(A)返回沿A数值减小方向最接近的整数
例如:
 FLOOR(12.3)求得12,FLOOR(-3.5)求得-4
```

### INTPART 整数部分

```pascal
取整.
用法:
 INTPART(A)返回沿A绝对值减小方向最接近的整数
例如:
 INTPART(12.3)求得12,INTPART(-3.5)求得-3
```

### BETWEEN 介于

```pascal
介于.
用法:
 BETWEEN(A,B,C)表示A处于B和C之间时返回1,B<A<C或C<A<B,否则返回0
例如:
 BETWEEN(CLOSE,MA(CLOSE,10),MA(CLOSE,5))表示收盘价介于5日均线和10日均线之间
```

### FRACPART 小数部分

```pascal
小数部分.
用法:
 FRACPART(X),返回X的小数部分
```

### ROUND 四舍五入

```pascal
四舍五入.
用法:
 ROUND(X),返回X四舍五入到个位的数值
```

### ROUND2 四舍五入

```pascal
四舍五入.
用法:
 ROUND2(X,N),返回X四舍五入到N位小数的数值
由于精度问题,数据越大误差可能越大
```

### SIGN 符号

```pascal
取符号.
用法:
 SIGN(X),返回X的符号.当X>0,X=0,X<0分别返回1,0,-1
```

### MOD 模

```pascal
取模.
用法:
 MOD(M,N),返回M关于N的模(M除以N的余数)
例如:
 MOD(5,3)返回2
```

### RAND 随机正整数

```pascal
取随机数.
用法:
 RAND(N),返回一个范围在1-N的随机整数
```

## 统计函数

### AVEDEV 平均绝对偏差

```pascal
AVEDEV(X,N) 返回平均绝对偏差
```

### DEVSQ 数据偏差平方和

```pascal
DEVSQ(X,N) 返回数据偏差平方和
```

### FORCAST 线性回归预测值

```pascal
FORCAST(X,N) 返回线性回归预测值
```

### SLOPE 线性回归斜率

```pascal
SLOPE(X,N) 返回线性回归斜率
```

### STD 估算标准差

```pascal
STD(X,N) 返回估算标准差
```

### STDP 总体标准差

```pascal
STDP(X,N) 返回总体标准差
```

### STDDEV 标准偏差

```pascal
STDDEV(X,N) 返回标准偏差
```

### VAR 估算样本方差

```pascal
VAR(X,N) 返回估算样本方差
```

### VARP 总体样本方差

```pascal
VARP(X,N) 返回总体样本方差
```

### COVAR 协方差

```pascal
COVAR(X,Y,N) 返回X和Y的N周期的协方差
```

### RELATE 相关系数

```pascal
RELATE(X,Y,N) 返回X和Y的N周期的相关系数
```

### BETA β(Beta)系数

```pascal
β(Beta)系数
BETA(N) 返回当前证券N周期收益与对应大盘指数收益相比的贝塔系数

(对应指数的数据必须要先下载到本地)
```

### BETAEX 相关放大系数

```pascal
BETAEX(X,Y,N) 返回X与Y的N周期的相关放大系数
```

### IVOLAT 期权波动率

```pascal
IVOLAT(N,M) 返回期权波动率 N表示计算周期 M表示类型,0:标的证券的历史波动率 1:隐含波动率
```

### BLOCKSETNUM 板块股个数

```pascal
BLOCKSETNUM.横向统计
用法:
 BLOCKSETNUM(板块名称),

返回该板块的股票个数.

板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,中小企业板,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确(此函数计算有较大耗时,请慎用于画线指标)
```

### HORCALC 板块统计

```pascal
HORCALC.横向统计
用法:
 HORCALC(板块名称,数据项,计算方式,权重),

数据项:
 100-HIGH,101-OPEN,102-LOW,103-CLOSE,104-VOL,105-涨幅,106-成交额
计算方式:
 0-累加,1-排名次,2-平均值
平均值权重:
 0-总股本,1-流通股本,2-等同权重,3-流通市值,4-总市值.

板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,中小企业板,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确(此函数计算有较大耗时,请慎用于画线指标)
```

### INSORT 板块指标排序

```pascal
INSORT.横向统计
用法:INSORT(板块名称,指标名称,指标线,升降序),

返回该股在板块中的排序序号
例如:
 INSORT('房地产','KDJ',3,0)表示该股的KDJ指标第三个输出即J之值在房地产板块中的排名,
最后一个参数为0表示降序排名.

板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,中小企业板,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确(此函数计算有较大耗时,请慎用于画线指标)
```

### INSUM 板块指标统计

```pascal
INSUM.横向统计
用法:INSUM(板块名称,指标名称,指标线,计算类型),

返回板块各成分该指标相应输出按计算类型得到的计算值.计算类型:0-累加,1-平均数,2-最大值,3-最小值.
例如:
 INSUM('房地产','KDJ',3,0)表示房地产板块中所有股票的KDJ指标第三个输出即J之值的累加值.

板块名称支持系统板块(上证Ａ股,深证Ａ股,沪深Ａ股,中小企业板,创业板,自选股,临时条件股,板块指数等),地区,行业,概念,风格,指数,组合和自定义板块,注意名称要准确(此函数计算有较大耗时,请慎用于画线指标)
```

## 形态函数

### COST 成本分布

```pascal
成本分布情况.
用法:
 COST(10),表示10%获利盘的价格是多少,即有10%的持仓量在该价格以下,其余90%在该价格以上,为套牢盘
该函数仅对日线分析周期有效
```

### PEAK 波峰值

```pascal
属于未来函数,前M个ZIG转向波峰值.
用法:
 PEAK(K,N,M)表示之字转向ZIG(K,N)的前M个波峰的数值,M必须大于等于1
例如:
 PEAK(1,5,1)表示%5最高价ZIG转向的上一个波峰的数值
```

### PEAKBARS 波峰位置

```pascal
属于未来函数,前M个ZIG转向波峰到当前距离.
用法:
 PEAKBARS(K,N,M)表示之字转向ZIG(K,N)的前M个波峰到当前的周期数,M必须大于等于1
例如:
 PEAKBARS(0,5,1)表示%5开盘价ZIG转向的上一个波峰到当前的周期数
```

### SAR 抛物转向

```pascal
抛物转向.
用法:
 SAR(N,S,M),N为计算周期,S为步长,M为极值
例如:
 SAR(10,2,20)表示计算10日抛物转向,步长为2%,极限值为20%
```

### SARTURN 抛物转向点

```pascal
抛物转向点.
用法:
 SARTURN(N,S,M),N为计算周期,S为步长,M为极值,若发生向上转向则返回1,若发生向下转向则返回-1,否则为0
其用法与SAR函数相同
```

### TROUGH 波谷值

```pascal
属于未来函数,前M个ZIG转向波谷值.
用法:
 TROUGH(K,N,M)表示之字转向ZIG(K,N)的前M个波谷的数值,M必须大于等于1
例如:
 TROUGH(2,5,2)表示%5最低价ZIG转向的前2个波谷的数值
```

### TROUGHBARS 波谷位置

```pascal
属于未来函数,前M个ZIG转向波谷到当前距离.
用法:
 TROUGHBARS(K,N,M)表示之字转向ZIG(K,N)的前M个波谷到当前的周期数,M必须大于等于1
例如:
 TROUGHBARS(2,5,2)表示%5最低价ZIG转向的前2个波谷到当前的周期数
```

### WINNER 获利盘比例

```pascal
获利盘比例.
用法:
 WINNER(CLOSE),表示以当前收市价卖出的获利盘比例,例如返回0.1表示10%获利盘;WINNER(10.5)表示10.5元价格的获利盘比例
该函数仅对日线分析周期有效
```

### LWINNER 近期获利盘比例

```pascal
近期获利盘比例.
用法: LWINNER(5,CLOSE),表示最近5天的那部分成本以当前收市价卖出的获利盘比例
例如:
 返回0.1表示10%获利盘
```

### PWINNER 远期获利盘比例

```pascal
远期获利盘比例.
用法: PWINNER(5,CLOSE),表示5天前的那部分成本以当前收市价卖出的获利盘比例
例如:
 返回0.1表示10%获利盘
```

### COSTEX 区间成本

```pascal
区间成本.
用法:
 例如COSTEX(CLOSE,REF(CLOSE,1)),表示近两日收盘价格间筹码的成本
该函数仅对日线分析周期有效
```

### PPART 远期成本分布比例

```pascal
远期成本分布比例.
用法:
 PPART(10),表示10前的成本占总成本的比例,0.2表示20%
```

### ZIG 之字转向

```pascal
属于未来函数,之字转向.
用法:
 ZIG(K,N),当价格变化量超过N%时转向,K表示0:开盘价,1:最高价,2:最低价,3:收盘价,其余:数组信息
例如:
 ZIG(3,5)表示收盘价的5%的ZIG转向
```

### ZIGA 之字转向

```pascal
属于未来函数,之字转向.
用法:
 ZIGA(K,X),当价格变化超过X时转向,K表示0:开盘价,1:最高价,2:最低价,3:收盘价,其余:数组信息
例如:
 ZIGA(3,1.5)表示收盘价变化1.5元的ZIGA转向
```

### NEWSAR 新抛物转向

```pascal
新抛物转向函数
用法:
 NewSAR(N,S),N为起始统计天数,S为加速因子
例如:
 NewSAR(10,2)表示从10日后开始统计,加速因子为2的抛物转向
```

### LFS 锁定因子

```pascal
LFS    返回个股锁定因子
```

## 指数函数

### INDEXA 大盘的成交额

```pascal
INDEXA    返回对应的大盘成交额,分别是上证指数,深证成指,中小板指和创业板指,港股为恒生指数,国内期货为对应的L9指数品种(持仓量)

(对应指数的数据必须要先下载到本地)
```

### INDEXADV 大盘的上涨家数

```pascal
INDEXADV  返回对应的上涨家数,分别是上证指数,深证成指,中小板指和创业板指,港股为恒生指数

(对应指数的数据必须要先下载到本地)
```

### INDEXDEC 大盘的下跌家数

```pascal
INDEXDEC  返回对应的下跌家数,分别是上证指数,深证成指,中小板指和创业板指,港股为恒生指数

(对应指数的数据必须要先下载到本地)
```

### INDEXC 大盘的收盘价

```pascal
INDEXC    返回对应的大盘收盘价,分别是上证指数,深证成指,中小板指和创业板指,港股为恒生指数,国内期货为对应的L9指数品种

(对应指数的数据必须要先下载到本地)
```

### INDEXH 大盘的最高价

```pascal
INDEXH    返回对应的大盘最高价,分别是上证指数,深证成指,中小板指和创业板指,港股为恒生指数,国内期货为对应的L9指数品种

(对应指数的数据必须要先下载到本地)
```

### INDEXL 大盘的最低价

```pascal
INDEXL    返回对应的大盘最低价,分别是上证指数,深证成指,中小板指和创业板指,港股为恒生指数,国内期货为对应的L9指数品种

(对应指数的数据必须要先下载到本地)
```

### INDEXO 大盘的开盘价

```pascal
INDEXO    返回对应的大盘开盘价,分别是上证指数,深证成指,中小板指和创业板指,港股为恒生指数,国内期货为对应的L9指数品种

(对应指数的数据必须要先下载到本地)
```

### INDEXV 大盘的成交量

```pascal
INDEXV    返回对应的大盘成交量,分别是上证指数,深证成指,中小板指和创业板指,港股为恒生指数,国内期货为对应的L9指数品种

(对应指数的数据必须要先下载到本地)
```

### HY_INDEXA 行业指数的成交额

```pascal
HY_INDEXA    返回对应的行业指数成交额,如果没有通达信板块指数,则不支持

(对应指数的数据必须要先下载到本地)
```

### HY_INDEXADV 行业指数的上涨家数

```pascal
HY_INDEXADV  返回对应的行业指数上涨家数,如果没有通达信板块指数,则不支持

(对应指数的数据必须要先下载到本地)
```

### HY_INDEXDEC 行业指数的下跌家数

```pascal
HY_INDEXDEC  返回对应的行业指数下跌家数,如果没有通达信板块指数,则不支持

(对应指数的数据必须要先下载到本地)
```

### HY_INDEXC 行业指数的收盘价

```pascal
HY_INDEXC    返回对应的行业指数收盘价,如果没有通达信板块指数,则不支持

(对应指数的数据必须要先下载到本地)
```

### HY_INDEXH 行业指数的最高价

```pascal
HY_INDEXH    返回对应的行业指数最高价,如果没有通达信板块指数,则不支持

(对应指数的数据必须要先下载到本地)
```

### HY_INDEXL 行业指数的最低价

```pascal
HY_INDEXL    返回对应的行业指数最低价,如果没有通达信板块指数,则不支持

(对应指数的数据必须要先下载到本地)
```

### HY_INDEXO 行业指数的开盘价

```pascal
HY_INDEXO    返回对应的行业指数开盘价,如果没有通达信板块指数,则不支持

(对应指数的数据必须要先下载到本地)
```

### HY_INDEXV 行业指数的成交量

```pascal
HY_INDEXV    返回对应的行业指数成交量,如果没有通达信板块指数,则不支持

(对应指数的数据必须要先下载到本地)
```

### DPZSCODE 所属的大盘指数的代码

```pascal
所属的大盘指数的代码.比如: CALCSTOCKINDEX(DPZSCODE,'KDJ',3);
```

### UNDERLYC 对应标的的收盘价

```pascal
UNDERLYC    返回对应标的的收盘价,对于期权品种有效

(对应指数的数据必须要先下载到本地)
```

## 资金流向函数

### TRADENUM 总成交单数

```pascal
TRADENUM
逐笔成交总单数,沪深品种的资金流向功能专用
```

### TRADEINNUM 逐笔买入成交单数

```pascal
TRADEINNUM
逐笔买入成交单数,相当于L2_VOLNUM(0,0)+L2_VOLNUM(1,0),沪深品种的资金流向功能专用
```

### TRADEOUTNUM 逐笔卖出成交单数

```pascal
TRADEOUTNUM
逐笔卖出成交单数,相当于L2_VOLNUM(0,1)+L2_VOLNUM(1,1),沪深品种的资金流向功能专用
```

### LARGETRDINNUM 逐笔买入大单成交单数

```pascal
LARGETRDINNUM
逐笔买入大单成交单数,相当于L2_VOLNUM(0,0),沪深品种的资金流向功能专用
```

### LARGETRDOUTNUM 逐笔卖出大单成交单数

```pascal
LARGETRDOUTNUM
逐笔卖出大单成交单数,相当于L2_VOLNUM(0,1),沪深品种的资金流向功能专用
```

### L2_VOLNUM 单数分档

```pascal
L2_VOLNUM(N,M)
单数分档,按: N(0--1):(超大+大)/(中+小),M(0--1):买/卖二类,沪深品种的资金流向功能专用
```

### L2_VOL 成交量分档

```pascal
L2_VOL(N,M)
成交量分档,按: N(0--3):超大/大/中/小四档处理,M(0--3):买入/卖出/主买/主卖四类,沪深品种的资金流向功能专用
```

### L2_AMO 成交额分档

```pascal
L2_AMO(N,M)
成交额分档,按: N(0--3):超大/大/中/小四档处理,M(0--3):买入/卖出/主买/主卖四类,沪深品种的资金流向功能专用
```

### CUR_BUYORDER 当前总委买量

```pascal
CUR_BUYORDER
当前总委买量,专业版(资金流向功能)沪深品种行情专用
```

### CUR_SELLORDER 当前总委卖量

```pascal
CUR_SELLORDER
当前总委卖量,专业版(资金流向功能)沪深品种行情专用
```

### ACTINVOL 主动买成交量

```pascal
ACTINVOL
主动买成交量,相当于L2_VOL(0,2)+L2_VOL(1,2)+L2_VOL(2,2)+L2_VOL(3,2),沪深品种的资金流向功能专用
```

### ACTOUTVOL 主动卖成交量

```pascal
ACTOUTVOL
主动卖成交量,相当于L2_VOL(0,3)+L2_VOL(1,3)+L2_VOL(2,3)+L2_VOL(3,3),沪深品种的资金流向功能专用
```

### LARGEINTRDVOL 逐笔买入大单成交量

```pascal
LARGEINTRDVOL
逐笔买入大单成交量,相当于L2_VOL(0,0)+L2_VOL(1,0),沪深品种的资金流向功能专用
```

### LARGEOUTTRDVOL 逐笔卖出大单成交量

```pascal
LARGEOUTTRDVOL
逐笔卖出大单成交量,相当于L2_VOL(0,1)+L2_VOL(1,1),沪深品种的资金流向功能专用
```

### BIDORDERVOL 累计总有效委买量

```pascal
BIDORDERVOL
累计总有效委买量,专业版(资金流向功能)沪深品种行情专用 累计总有效委买量-累计总有效撤买量=总买+总成交量
```

### BIDCANCELVOL 累计总有效撤买量

```pascal
BIDCANCELVOL
累计总有效撤买量,专业版(资金流向功能)沪深品种行情专用  累计总有效委买量-累计总有效撤买量=总买+总成交量
```

### AVGBIDPX 最新委买均价

```pascal
AVGBIDPX
专业版(资金流向功能)沪深品种行情专用:最新委买均价
```

### OFFERORDERVOL 累计总有效委卖量

```pascal
OFFERORDERVOL
累计总有效委卖量,专业版(资金流向功能)沪深品种行情专用  累计总有效委卖量-累计总有效撤卖量=总卖+总成交量
```

### OFFERCANCELVOL 累计总有效撤卖量

```pascal
OFFERCANCELVOL
累计总有效撤卖量,专业版(资金流向功能)沪深品种行情专用  累计总有效委卖量-累计总有效撤卖量=总卖+总成交量
```

### AVGOFFERPX 最新委卖均价

```pascal
AVGOFFERPX
专业版(资金流向功能)沪深品种行情专用:最新委卖均价
```

## 绘图函数

### PLOYLINE 折线段

```pascal
绘制折线段.
用法:
 PLOYLINE(COND,PRICE),当COND条件满足时,以PRICE位置为顶点画折线连接.
例如:
 PLOYLINE(HIGH>=HHV(HIGH,20),HIGH)表示在创20天新高点之间画折线
```

### DRAWLINE 直线段

```pascal
属于未来函数,绘制直线段.
用法:
 DRAWLINE(COND1,PRICE1,COND2,PRICE2,EXPAND),当COND1条件满足时,在PRICE1位置画直线起点,当COND2条件满足时,在PRICE2位置画直线终点,EXPAND为延长类型.
例如:
 DRAWLINE(HIGH>=HHV(HIGH,20),HIGH,LOW<=LLV(LOW,20),LOW,1)表示在创20天新高与创20天新低之间画直线并且向右延长.
```

### DRAWSL 斜线

```pascal
绘制斜线.
用法:
 DRAWSL(COND,PRICE,SLOPE,LEN,DIRECT),当COND条件满足时,在PRICE位置画斜线,SLOPE为斜率,LEN为长度,DIRECT为0向右延伸,1向左延伸,2双向延伸.
注意:
1.K线间的纵向高度差为SLOPE;
2.SLOPE为0时,为水平线;
3.SLOPE为10000时,为垂直线,LEN为向上的像素高度,DIRECT表示向上或向下延伸;
4.SLOPE和LEN支持变量;
```

### DRAWKLINE K 线

```pascal
DRAWKLINE(HIGH,OPEN,LOW,CLOSE).
用法:
 以HIGH为最高价,OPEN为开盘价,LOW为最低,CLOSE收盘画K线
```

### STICKLINE 柱状线

```pascal
绘制柱线.
用法:
 STICKLINE(COND,PRICE1,PRICE2,WIDTH,EMPTY),当COND条件满足时,在PRICE1和PRICE2位置之间画柱状线,宽度为WIDTH(10为标准间距),EMPTH为0画实心柱,-1画虚线空心柱,否则画实线空心柱.
例如:
 STICKLINE(CLOSE>OPEN,CLOSE,OPEN,0.8,1)表示画K线中阳线的空心柱体部分.
```

### DRAWICON 图标

```pascal
绘制小图标.
用法:
 DRAWICON(COND,PRICE,TYPE),当COND条件满足时,在PRICE位置画TYPE号图标(TYPE为1--46).
例如:
 DRAWICON(CLOSE>OPEN,LOW,1)表示当收阳时在最低价位置画1号图标.
```

### DRAWTEXT 文字

```pascal
显示文字.
用法:
 DRAWTEXT(COND,PRICE,TEXT),当COND条件满足时,在PRICE位置书写文字TEXT.
例如:
 DRAWTEXT(CLOSE/OPEN>1.08,LOW,'大阳线')表示当日实体阳线大于8%时在最低价位置显示'大阳线'字样.
```

### DRAWTEXT_FIX 定点文字

```pascal
固定位置显示文字.
用法:
 DRAWTEXT_FIX(COND,X,Y,TYPE,TEXT),当COND条件满足时,在当前指标窗口内(X,Y)位置书写文字TEXT,X,Y为书写点在窗口中相对于左上角的百分比,TYPE:0为左对齐,1为右对齐.
例如:
 DRAWTEXT_FIX(CURRBARSCOUNT=1 AND CLOSE/OPEN>1.08,0.5,0.5,0,'大阳线')表示最后一个交易日实体阳线大于8%时在窗口中间位置显示'大阳线'字样.
```

### DRAWNUMBER 画数字

```pascal
画出数字.
用法:
 DRAWNUMBER(COND,PRICE,NUMBER),当COND条件满足时,在PRICE位置书写数字NUMBER.
例如:
 DRAWNUMBER(CLOSE/OPEN>1.08,LOW,C)表示当日实体阳线大于8%时在最低价位置显示收盘价.
```

### DRAWNUMBER_FIX 画定点数字

```pascal
固定位置显示数字.
用法:
 DRAWNUMBER_FIX(COND,X,Y,TYPE,NUMBER),当COND条件满足时,在当前指标窗口内(X,Y)位置书写数字NUMBER,X,Y为书写点在窗口中相对于左上角的百分比,TYPE:0为左对齐,1为右对齐.
例如:
 DRAWNUMBER_FIX(CURRBARSCOUNT=1 AND CLOSE/OPEN>1.08,0.5,0.5,0,C)表示最后一个交易日实体阳线大于8%时在窗口中间位置显示收盘价.
```

### RGB 自定色

```pascal
将自定颜色作为数值输出.
用法:
 RGB(Red,Green,Blue),输出为0XBBGGRR,参数使用十进制数,范围为0至255,以最近一个周期数值为准.
例如:
 RGB(0,0,255)输出结果为16进制的0XFF0000.
```

### DRAWBAND 画带状线

```pascal
画出带状线.
用法:
 DRAWBAND(VAL1,COLOR1,VAL2,COLOR2),当VAL1>VAL2时,在VAL1和VAL2之间填充COLOR1;当VAL1<VAL2时,填充COLOR2,这里的颜色均使用RGB函数计算得到.
例如:
 DRAWBAND(OPEN,RGB(0,224,224),CLOSE,RGB(255,96,96));
```

### DRAWBMP 画图片

```pascal
画出图片.
用法:
 DRAWBMP(COND,PRICE,'Bmp文件名'),当条件COND满足时,在PRICE位置画T0002目录下面的signals目录下面的"Bmp文件名";
例如:
 DRAWBMP(O>C,CLOSE,'高开');
```

### DRAWGBK 填充背景

```pascal
填充背景.
用法:
 DRAWGBK(COND,COLOR1,COLOR2,是否横向渐进,'BMP或PNG文件名',是否拉升BMP或PNG文件名),当条件COND满足时填充背景,如果COLOR1和COLOR2有一个不为0,则以COLOR1到COLOR2的渐变色为背景,否则画T0002目录下面的signals目录下面的'Bmp或Png文件名'(优先使用BMP文件).
例如:
 DRAWGBK(O>C,RGB(0,255,0),RGB(255,0,0),0,'背景图',0);
```

### DRAWRECTREL 相对位置上画矩形

```pascal
相对位置上画矩形.
用法:
 DRAWRECTREL(LEFT,TOP,RIGHT,BOTTOM,COLOR),以图形窗口(LEFT,TOP)为左上角,(RIGHT,BOTTOM)为右下角绘制矩形,坐标单位是窗口沿水平和垂直方向的1/1000,取值范围是0—999,超出范围则可能显示在图形窗口外,矩形中间填充颜色COLOR,COLOR为0表示不填充.
例如:
 DRAWRECTREL(0,0,500,500,RGB(255,255,0))表示在图形最左上部1/4位置用黄色绘制矩形.
```

## 关联财务函数

### SETCODE 市场类型

```pascal
SETCODE 市场类型
0:深圳 1:上海,47:中金所期货 28:郑州商品 29:大连商品 30:上海商品,27:香港指数 31:香港主板,48:香港创业板...
```

### MINDIFF 最小变动价位

```pascal
MINDIFF  返回某品种的最小变动价位(也是交易价格的最小间隔单位)
```

### MULTIPLIER 期货每手乘数

```pascal
MULTIPLIER  期货每手乘数
```

### TQFLAG 当前的复权状态

```pascal
TQFLAG  当前的复权状态,0:无复权 1:前复权 2:后复权
```

### USEDDATANUM 当前使用的数据个数

```pascal
USEDDATANUM  当前使用的数据个数
```

### TOTALCAPITAL 当前总股本(手)

```pascal
TOTALCAPITAL  当前总股本
```

### CAPITAL 当前流通股本(手)

```pascal
CAPITAL  当前流通股本
```

### FINANCE(1) 总股本(股)

```pascal
FINANCE(1) 总股本(随时间可能有变化)
```

### FINANCE(2) 市场类型

```pascal
FINANCE(2) 用法同SETCODE
```

### FINANCE(3) 沪深品种类型

```pascal
FINANCE(3) 沪深品种类型
0:指数,1:A股主板,2:中小板,3:创业板,4:三板,5:B股,6:债券,7:基金,8:权证,9:其它,10:非沪深品种
```

### FINANCE(4) 沪深行业代码

```pascal
FINANCE(4) 沪深品种通达信二级行业代码

```

### FINANCE(5) B 股

```pascal
FINANCE(5) B股
```

### FINANCE(6) H 股

```pascal
FINANCE(6) H股
```

### FINANCE(7) 流通股本(股)

```pascal
FINANCE(7)  流通股本(随时间可能有变化)
```

### FINANCE(8) 股东人数(户)

```pascal
FINANCE(8)  股东人数(户)(上市公司的最新数据)
```

### FINANCE(9) 资产负债率%

```pascal
FINANCE(9)  资产负债率
即:(总资产-净资产-少数股东权益)/总资产*100
```

### FINANCE(10) 总资产

```pascal
FINANCE(10) 总资产
```

### FINANCE(11) 流动资产

```pascal
FINANCE(11) 流动资产
```

### FINANCE(12) 固定资产

```pascal
FINANCE(12) 固定资产
```

### FINANCE(13) 无形资产

```pascal
FINANCE(13) 无形资产
```

### FINANCE(15) 流动负债

```pascal
FINANCE(15) 流动负债
```

### FINANCE(16) 少数股东权益

```pascal
FINANCE(16) 少数股东权益
```

### FINANCE(17) 资本公积金

```pascal
FINANCE(17) 资本公积金
```

### FINANCE(18) 每股公积金

```pascal
FINANCE(18)  每股公积金
```

### FINANCE(19) 股东权益(净资产)

```pascal
FINANCE(19) 股东权益(净资产)
```

### FINANCE(20) 营业收入

```pascal
FINANCE(20) 营业收入
```

### FINANCE(21) 营业成本

```pascal
FINANCE(21) 营业成本
```

### FINANCE(22) 应收帐款

```pascal
FINANCE(22) 应收帐款
```

### FINANCE(23) 营业利润

```pascal
FINANCE(23) 营业利润
```

### FINANCE(24) 投资收益

```pascal
FINANCE(24) 投资收益
```

### FINANCE(25) 经营现金流量

```pascal
FINANCE(25) 经营现金流量
```

### FINANCE(26) 总现金流量

```pascal
FINANCE(26) 总现金流量
```

### FINANCE(27) 存货

```pascal
FINANCE(27) 存货
```

### FINANCE(28) 利润总额

```pascal
FINANCE(28) 利润总额
```

### FINANCE(29) 税后利润

```pascal
FINANCE(29) 税后利润
```

### FINANCE(30) 净利润

```pascal
FINANCE(30) 净利润
```

### FINANCE(31) 未分配利润

```pascal
FINANCE(31) 未分配利润
```

### FINANCE(32) 每股未分配利润

```pascal
FINANCE(32)  每股未分配利润
```

### FINANCE(33) 每股收益(全年折算)

```pascal
FINANCE(33)  每股收益(折算为全年收益),对于沪深品种有效
```

### FINANCE(34) 每股净资产

```pascal
FINANCE(34)  每股净资产
```

### FINANCE(35) 季报调整净资产

```pascal
FINANCE(35) 季报中调整后的每股净资产
```

### FINANCE(36) 股东权益比

```pascal
FINANCE(36)  股东权益比
```

### FINANCE(37) 第几季报

```pascal
FINANCE(37)  第几期季度报告,1为一季报,2为中报,3为三季报,4为年报,对于沪深品种有效
```

### FINANCE(38) 每股收益(最近一期)

```pascal
FINANCE(38)  每股收益(最近一期季报)
```

### FINANCE(40) 流通市值

```pascal
FINANCE(40)  流通市值
```

### FINANCE(41) AB 股总市值

```pascal
FINANCE(41)  AB股总市值(不包括在香港等地上市的股份市值)
```

### FINANCE(42) 上市的天数

```pascal
FINANCE(42)  上市的天数
```

### FINANCE(43) 利润同比%

```pascal
FINANCE(43)  净利润同比增长率
```

### FINANCE(44) 收入同比%

```pascal
FINANCE(44)  收入同比增长率
```

### FINANCE(45) 股息率%

```pascal
FINANCE(45)  股息率
```

### FINANCE(46) 自由流通股本(股)

```pascal
FINANCE(46)  自由流通股本(股) 流通股本中减去占5%以上股份的部分
```

### FINANCE(49) 今日权息标识

```pascal
FINANCE(49)  今日权息标识 0:无 1:分红 2:送转股 3:分红+送转股 4:配股
```

### FINANCE(50) 是否属于沪深 300

```pascal
FINANCE(50)  是否属于沪深300
```

### FINANCE(51) 是否含可转债

```pascal
FINANCE(51)  是否含可转债
```

### FINANCE(52) 是否为融资融券标的

```pascal
FINANCE(52)  是否为融资融券标的
```

### FINANCE(53) 每股股息(港股,美股)

```pascal
FINANCE(53) 每股股息(港股,美股)
```

### FINANCE(60) 行权比例(权证,期权)

```pascal
FINANCE(60)  行权比例(权证,期权)
```

### FINANCE(61) 行权价(权证,期权)

```pascal
FINANCE(61)  行权价(权证,期权)
```

### FINANCE(62) 杠杆比率(权证,期权)

```pascal
FINANCE(62)  杠杆比率(权证,期权),实际杠杆比率为FINANCE(62)*FINANCE(68)
```

### FINANCE(63) 内在价值(权证,期权)

```pascal
FINANCE(63)  内在价值(权证,期权)
```

### FINANCE(64) 溢价率(权证,期权)

```pascal
FINANCE(64)  溢价率(权证,期权)
```

### FINANCE(65) 时间价值(权证,期权)

```pascal
FINANCE(65)  时间价值(权证,期权)
```

### FINANCE(66) 剩余天数(期货,期权)

```pascal
FINANCE(66)  剩余天数(期货,期权)
```

### FINANCE(67) 合约乘数(期权)

```pascal
FINANCE(67)  合约乘数(期权)
```

### FINANCE(68) Delta 对冲值(权证,期权)

```pascal
FINANCE(68)  Delta对冲值(权证,期权)
```

### FINANCE(69) 认购认沽类型(股票期权)

```pascal
FINANCE(69)  认购认沽类型(股票期权),0表示是认购,1表示是认沽
```

## 专业财务函数

### FINVALUE 专业财务数据(序列)

```pascal
引用专业财务数据.如果当期没有出来,引用最近一期的数据.数据请用[专业财务数据]下载.
FINVALUE(ID),ID为数据编号
数据编号如下:
0--返回报告期(YYMMDD格式),150930表示为2015年第三季
-------------每股指标-----------------------------
1--基本每股收益
2--扣除非经常性损益每股收益
3--每股未分配利润
4--每股净资产
5--每股资本公积金
6--净资产收益率
7--每股经营现金流量
-------------资产负债表----------------------------
8.--货币资金
9.--交易性金融资产
10.--应收票据
11.--应收账款
12.--预付款项
13.--其他应收款
14.--应收关联公司款
15.--应收利息
16.--应收股利
17.--存货
18.--其中：消耗性生物资产
19.--一年内到期的非流动资产
20.--其他流动资产
21.--流动资产合计
22.--可供出售金融资产
23.--持有至到期投资
24.--长期应收款
25.--长期股权投资
26.--投资性房地产
27.--固定资产
28.--在建工程
29.--工程物资
30.--固定资产清理
31.--生产性生物资产
32.--油气资产
33.--无形资产
34.--开发支出
35.--商誉
36.--长期待摊费用
37.--递延所得税资产
38.--其他非流动资产
39.--非流动资产合计
40.--资产总计
41.--短期借款
42.--交易性金融负债
43.--应付票据
44.--应付账款
45.--预收款项
46.--应付职工薪酬
47.--应交税费
48.--应付利息
49.--应付股利
50.--其他应付款
51.--应付关联公司款
52.--一年内到期的非流动负债
53.--其他流动负债
54.--流动负债合计
55.--长期借款
56.--应付债券
57.--长期应付款
58.--专项应付款
59.--预计负债
60.--递延所得税负债
61.--其他非流动负债
62.--非流动负债合计
63.--负债合计
64.--实收资本（或股本）
65.--资本公积
66.--盈余公积
67.--减：库存股
68.--未分配利润
69.--少数股东权益
70.--外币报表折算价差
71.--非正常经营项目收益调整
72.--所有者权益（或股东权益）合计
73.--负债和所有者（或股东权益）合计
-------------利润表-----------------------------
74.--其中：营业收入
75.--其中：营业成本
76.--营业税金及附加
77.--销售费用
78.--管理费用
79.--堪探费用
80.--财务费用
81.--资产减值损失
82.--加：公允价值变动净收益
83.--投资收益
84.--其中：对联营企业和合营企业的投资收益
85.--影响营业利润的其他科目
86.--三、营业利润
87.--加：补贴收入
88.--营业外收入
89.--减：营业外支出
90.--其中：非流动资产处置净损失
91.--加：影响利润总额的其他科目
92.--四、利润总额
93.--减：所得税
94.--加：影响净利润的其他科目
95.--五、净利润
96.--归属于母公司所有者的净利润
97.--少数股东损益
------------------现金流量表---------------------
98.--销售商品、提供劳务收到的现金
99.--收到的税费返还
100.--收到其他与经营活动有关的现金
101.--经营活动现金流入小计
102.--购买商品、接受劳务支付的现金
103.--支付给职工以及为职工支付的现金
104.--支付的各项税费
105.--支付其他与经营活动有关的现金
106.--经营活动现金流出小计
107.--经营活动产生的现金流量净额
108.--收回投资收到的现金
109.--取得投资收益收到的现金
110.--处置固定资产、无形资产和其他长期资产收回的现金净额
111.--处置子公司及其他营业单位收到的现金净额
112.--收到其他与投资活动有关的现金
113.--投资活动现金流入小计
114.--购建固定资产、无形资产和其他长期资产支付的现金
115.--投资支付的现金
116.--取得子公司及其他营业单位支付的现金净额
117.--支付其他与投资活动有关的现金
118.--投资活动现金流出小计
119.--投资活动产生的现金流量净额
120.--吸收投资收到的现金
121.--取得借款收到的现金
122.--收到其他与筹资活动有关的现金
123.--筹资活动现金流入小计
124.--偿还债务支付的现金
125.--分配股利、利润或偿付利息支付的现金
126.--支付其他与筹资活动有关的现金
127.--筹资活动现金流出小计
128.--筹资活动产生的现金流量净额
129.--四、汇率变动对现金的影响
130.--四(2)、其他原因对现金的影响
131.--五、现金及现金等价物净增加额
132.--期初现金及现金等价物余额
133.--期末现金及现金等价物余额
134.--净利润
135.--加：资产减值准备
136.--固定资产折旧、油气资产折耗、生产性生物资产折旧
137.--无形资产摊销
138.--长期待摊费用摊销
139.--处置固定资产、无形资产和其他长期资产的损失
140.--固定资产报废损失
141.--公允价值变动损失
142.--财务费用
143.--投资损失
144.--递延所得税资产减少
145.--递延所得税负债增加
146.--存货的减少
147.--经营性应收项目的减少
148.--经营性应付项目的增加
149.--其他
150.--经营活动产生的现金流量净额2
151.--债务转为资本
152.--一年内到期的可转换公司债券
153.--融资租入固定资产
154.--现金的期末余额
155.--减：现金的期初余额
156.--加：现金等价物的期末余额
157.--减：现金等价物的期初余额
158.--现金及现金等价物净增加额
---------------------偿债能力分析------------------------
159.--流动比率
160.--速动比率
161.--现金比率(%)
162.--利息保障倍数
163.--非流动负债比率(%)
164.--流动负债比率(%)
165.--现金到期债务比率(%)
166.--有形资产净值债务率(%)
167.--权益乘数(%)
168.--股东的权益/负债合计(%)
169.--有形资产/负债合计(%)
170.--经营活动产生的现金流量净额/负债合计(%)
171.--EBITDA/负债合计(%)
---------------------经营效率分析------------------------
172.--应收帐款周转率
173.--存货周转率
174.--运营资金周转率
175.--总资产周转率
176.--固定资产周转率
177.--应收帐款周转天数
178.--存货周转天数
179.--流动资产周转率
180.--流动资产周转天数
181.--总资产周转天数
182.--股东权益周转率
---------------------发展能力分析------------------------
183.--营业收入增长率(%)
184.--净利润增长率(%)
185.--净资产增长率(%)
186.--固定资产增长率(%)
187.--总资产增长率(%)
188.--投资收益增长率(%)
189.--营业利润增长率(%)
190.--暂无
191.--暂无
192.--暂无
---------------------获利能力分析------------------------
193.--成本费用利润率(%)
194.--营业利润率
195.--营业税金率
196.--营业成本率
197.--净资产收益率
198.--投资收益率
199.--销售净利率(%)
200.--总资产报酬率
201.--净利润率
202.--销售毛利率(%)
203.--三费比重
204.--管理费用率
205.--财务费用率
206.--扣除非经常性损益后的净利润
207.--息税前利润(EBIT)
208.--息税折旧摊销前利润(EBITDA)
209.--EBITDA/营业总收入(%)
---------------------资本结构分析---------------------
210.--资产负债率(%)
211.--流动资产比率
212.--货币资金比率
213.--存货比率
214.--固定资产比率
215.--负债结构比
216.--归属于母公司股东权益/全部投入资本(%)
217.--股东的权益/带息债务(%)
218.--有形资产/净债务(%)
---------------------现金流量分析---------------------
219.--每股经营性现金流(元)
220.--营业收入现金含量(%)
221.--经营活动产生的现金流量净额/经营活动净收益(%)
222.--销售商品提供劳务收到的现金/营业收入(%)
223.--经营活动产生的现金流量净额/营业收入
224.--资本支出/折旧和摊销
225.--每股现金流量净额(元)
226.--经营净现金比率（短期债务）
227.--经营净现金比率（全部债务）
228.--经营活动现金净流量与净利润比率
229.--全部资产现金回收率
---------------------单季度财务指标---------------------
230.--营业收入
231.--营业利润
232.--归属于母公司所有者的净利润
233.--扣除非经常性损益后的净利润
234.--经营活动产生的现金流量净额
235.--投资活动产生的现金流量净额
236.--筹资活动产生的现金流量净额
237.--现金及现金等价物净增加额
---------------------股本股东---------------------
238.--总股本
239.--已上市流通A股
240.--已上市流通B股
241.--已上市流通H股
242.--股东人数(户)
243.--第一大股东的持股数量
244.--十大流通股东持股数量合计(股)
245.--十大股东持股数量合计(股)
---------------------机构持股---------------------
246.--机构总量（家）
247.--机构持股总量(股)
248.--QFII机构数
249.--QFII持股量
250.--券商机构数
251.--券商持股量
252.--保险机构数
253.--保险持股量
254.--基金机构数
255.--基金持股量
256.--社保机构数
257.--社保持股量
258.--私募机构数
259.--私募持股量
260.--财务公司机构数
261.--财务公司持股量
262.--年金机构数
263.--年金持股量
---------------------新增指标---------------------
264.--十大流通股东中持有A股合计(股) [注：季度报告中，若股东同时持有非流通A股性质的股份(如同时持有流通A股和流通B股），指标264取的是包含同时持有非流通A股性质的流通股数]
265.--第一大流通股东持股量(股)
266.--自由流通股(股)[注：1.自由流通股=已流通A股-十大流通股东5%以上的A股；2.季度报告中，若股东同时持有非流通A股性质的股份(如同时持有流通A股和流通H股），5%以上的持股取的是不包含同时持有非流通A股性质的流通股数，结果可能偏大； 3.指标按报告期展示，新股在上市日的下个报告期才有数据]
267.--受限流通A股(股)
268.--一般风险准备(金融类)
269.--其他综合收益(利润表)
270.--综合收益总额(利润表)
271.--归属于母公司股东权益(资产负债表)
272.--银行机构数(家)(机构持股)
273.--银行持股量(股)(机构持股)
274.--一般法人机构数(家)(机构持股)
275.--一般法人持股量(股)(机构持股)
276.--近一年净利润(元)
277.--信托机构数(家)(机构持股)
278.--信托持股量(股)(机构持股)

```

### FINONE 专业财务数据(指定日期)

```pascal
引用指定年和月日的某类型的财务数据.数据请用[专业财务数据]下载.
FINONE(ID,Y,MMDD),ID为数据编号,Y和MMDD表示年和月日.
如果Y和MMDD都为0,表示最新的财报;
如果Y为0,MMDD为小于300的数字,表示最近一期向前推MMDD期的数据,如果是331,630,930,1231这些,表示最近一期的对应季报的数据;
如果MMDD为0,Y为一数字,表示最近一期向前推Y年的同期数据;
季报分界点为:0331,0630,0930,1231
数据编号如下:
0--返回报告期(YYMMDD格式),150930表示为2015年第三季
-------------每股指标-----------------------------
1--基本每股收益
2--扣除非经常性损益每股收益
3--每股未分配利润
4--每股净资产
5--每股资本公积金
6--净资产收益率
7--每股经营现金流量
-------------资产负债表----------------------------
8.--货币资金
9.--交易性金融资产
10.--应收票据
11.--应收账款
12.--预付款项
13.--其他应收款
14.--应收关联公司款
15.--应收利息
16.--应收股利
17.--存货
18.--其中：消耗性生物资产
19.--一年内到期的非流动资产
20.--其他流动资产
21.--流动资产合计
22.--可供出售金融资产
23.--持有至到期投资
24.--长期应收款
25.--长期股权投资
26.--投资性房地产
27.--固定资产
28.--在建工程
29.--工程物资
30.--固定资产清理
31.--生产性生物资产
32.--油气资产
33.--无形资产
34.--开发支出
35.--商誉
36.--长期待摊费用
37.--递延所得税资产
38.--其他非流动资产
39.--非流动资产合计
40.--资产总计
41.--短期借款
42.--交易性金融负债
43.--应付票据
44.--应付账款
45.--预收款项
46.--应付职工薪酬
47.--应交税费
48.--应付利息
49.--应付股利
50.--其他应付款
51.--应付关联公司款
52.--一年内到期的非流动负债
53.--其他流动负债
54.--流动负债合计
55.--长期借款
56.--应付债券
57.--长期应付款
58.--专项应付款
59.--预计负债
60.--递延所得税负债
61.--其他非流动负债
62.--非流动负债合计
63.--负债合计
64.--实收资本（或股本）
65.--资本公积
66.--盈余公积
67.--减：库存股
68.--未分配利润
69.--少数股东权益
70.--外币报表折算价差
71.--非正常经营项目收益调整
72.--所有者权益（或股东权益）合计
73.--负债和所有者（或股东权益）合计
-------------利润表-----------------------------
74.--其中：营业收入
75.--其中：营业成本
76.--营业税金及附加
77.--销售费用
78.--管理费用
79.--堪探费用
80.--财务费用
81.--资产减值损失
82.--加：公允价值变动净收益
83.--投资收益
84.--其中：对联营企业和合营企业的投资收益
85.--影响营业利润的其他科目
86.--三、营业利润
87.--加：补贴收入
88.--营业外收入
89.--减：营业外支出
90.--其中：非流动资产处置净损失
91.--加：影响利润总额的其他科目
92.--四、利润总额
93.--减：所得税
94.--加：影响净利润的其他科目
95.--五、净利润
96.--归属于母公司所有者的净利润
97.--少数股东损益
------------------现金流量表---------------------
98.--销售商品、提供劳务收到的现金
99.--收到的税费返还
100.--收到其他与经营活动有关的现金
101.--经营活动现金流入小计
102.--购买商品、接受劳务支付的现金
103.--支付给职工以及为职工支付的现金
104.--支付的各项税费
105.--支付其他与经营活动有关的现金
106.--经营活动现金流出小计
107.--经营活动产生的现金流量净额
108.--收回投资收到的现金
109.--取得投资收益收到的现金
110.--处置固定资产、无形资产和其他长期资产收回的现金净额
111.--处置子公司及其他营业单位收到的现金净额
112.--收到其他与投资活动有关的现金
113.--投资活动现金流入小计
114.--购建固定资产、无形资产和其他长期资产支付的现金
115.--投资支付的现金
116.--取得子公司及其他营业单位支付的现金净额
117.--支付其他与投资活动有关的现金
118.--投资活动现金流出小计
119.--投资活动产生的现金流量净额
120.--吸收投资收到的现金
121.--取得借款收到的现金
122.--收到其他与筹资活动有关的现金
123.--筹资活动现金流入小计
124.--偿还债务支付的现金
125.--分配股利、利润或偿付利息支付的现金
126.--支付其他与筹资活动有关的现金
127.--筹资活动现金流出小计
128.--筹资活动产生的现金流量净额
129.--四、汇率变动对现金的影响
130.--四(2)、其他原因对现金的影响
131.--五、现金及现金等价物净增加额
132.--期初现金及现金等价物余额
133.--期末现金及现金等价物余额
134.--净利润
135.--加：资产减值准备
136.--固定资产折旧、油气资产折耗、生产性生物资产折旧
137.--无形资产摊销
138.--长期待摊费用摊销
139.--处置固定资产、无形资产和其他长期资产的损失
140.--固定资产报废损失
141.--公允价值变动损失
142.--财务费用
143.--投资损失
144.--递延所得税资产减少
145.--递延所得税负债增加
146.--存货的减少
147.--经营性应收项目的减少
148.--经营性应付项目的增加
149.--其他
150.--经营活动产生的现金流量净额2
151.--债务转为资本
152.--一年内到期的可转换公司债券
153.--融资租入固定资产
154.--现金的期末余额
155.--减：现金的期初余额
156.--加：现金等价物的期末余额
157.--减：现金等价物的期初余额
158.--现金及现金等价物净增加额
---------------------偿债能力分析------------------------
159.--流动比率
160.--速动比率
161.--现金比率(%)
162.--利息保障倍数
163.--非流动负债比率(%)
164.--流动负债比率(%)
165.--现金到期债务比率(%)
166.--有形资产净值债务率(%)
167.--权益乘数(%)
168.--股东的权益/负债合计(%)
169.--有形资产/负债合计(%)
170.--经营活动产生的现金流量净额/负债合计(%)
171.--EBITDA/负债合计(%)
---------------------经营效率分析------------------------
172.--应收帐款周转率
173.--存货周转率
174.--运营资金周转率
175.--总资产周转率
176.--固定资产周转率
177.--应收帐款周转天数
178.--存货周转天数
179.--流动资产周转率
180.--流动资产周转天数
181.--总资产周转天数
182.--股东权益周转率
---------------------发展能力分析------------------------
183.--营业收入增长率(%)
184.--净利润增长率(%)
185.--净资产增长率(%)
186.--固定资产增长率(%)
187.--总资产增长率(%)
188.--投资收益增长率(%)
189.--营业利润增长率(%)
190.--暂无
191.--暂无
192.--暂无
---------------------获利能力分析------------------------
193.--成本费用利润率(%)
194.--营业利润率
195.--营业税金率
196.--营业成本率
197.--净资产收益率
198.--投资收益率
199.--销售净利率(%)
200.--总资产报酬率
201.--净利润率
202.--销售毛利率(%)
203.--三费比重
204.--管理费用率
205.--财务费用率
206.--扣除非经常性损益后的净利润
207.--息税前利润(EBIT)
208.--息税折旧摊销前利润(EBITDA)
209.--EBITDA/营业总收入(%)
---------------------资本结构分析---------------------
210.--资产负债率(%)
211.--流动资产比率
212.--货币资金比率
213.--存货比率
214.--固定资产比率
215.--负债结构比
216.--归属于母公司股东权益/全部投入资本(%)
217.--股东的权益/带息债务(%)
218.--有形资产/净债务(%)
---------------------现金流量分析---------------------
219.--每股经营性现金流(元)
220.--营业收入现金含量(%)
221.--经营活动产生的现金流量净额/经营活动净收益(%)
222.--销售商品提供劳务收到的现金/营业收入(%)
223.--经营活动产生的现金流量净额/营业收入
224.--资本支出/折旧和摊销
225.--每股现金流量净额(元)
226.--经营净现金比率（短期债务）
227.--经营净现金比率（全部债务）
228.--经营活动现金净流量与净利润比率
229.--全部资产现金回收率
---------------------单季度财务指标---------------------
230.--营业收入
231.--营业利润
232.--归属于母公司所有者的净利润
233.--扣除非经常性损益后的净利润
234.--经营活动产生的现金流量净额
235.--投资活动产生的现金流量净额
236.--筹资活动产生的现金流量净额
237.--现金及现金等价物净增加额
---------------------股本股东---------------------
238.--总股本
239.--已上市流通A股
240.--已上市流通B股
241.--已上市流通H股
242.--股东人数(户)
243.--第一大股东的持股数量
244.--十大流通股东持股数量合计(股)
245.--十大股东持股数量合计(股)
---------------------机构持股---------------------
246.--机构总量（家）
247.--机构持股总量(股)
248.--QFII机构数
249.--QFII持股量
250.--券商机构数
251.--券商持股量
252.--保险机构数
253.--保险持股量
254.--基金机构数
255.--基金持股量
256.--社保机构数
257.--社保持股量
258.--私募机构数
259.--私募持股量
260.--财务公司机构数
261.--财务公司持股量
262.--年金机构数
263.--年金持股量
---------------------新增指标---------------------
264.--十大流通股东中持有A股合计(股) [注：季度报告中，若股东同时持有非流通A股性质的股份(如同时持有流通A股和流通B股），指标264取的是包含同时持有非流通A股性质的流通股数]
265.--第一大流通股东持股量(股)
266.--自由流通股(股)[注：1.自由流通股=已流通A股-十大流通股东5%以上的A股；2.季度报告中，若股东同时持有非流通A股性质的股份(如同时持有流通A股和流通H股），5%以上的持股取的是不包含同时持有非流通A股性质的流通股数，结果可能偏大； 3.指标按报告期展示，新股在上市日的下个报告期才有数据]
267.--受限流通A股(股)
268.--一般风险准备(金融类)
269.--其他综合收益(利润表)
270.--综合收益总额(利润表)
271.--归属于母公司股东权益(资产负债表)
272.--银行机构数(家)(机构持股)
273.--银行持股量(股)(机构持股)
274.--一般法人机构数(家)(机构持股)
275.--一般法人持股量(股)(机构持股)
276.--近一年净利润(元)
277.--信托机构数(家)(机构持股)
278.--信托持股量(股)(机构持股)

```

## 即时行情函数

### DYNAINFO(3) 前收盘价

```pascal
DYNAINFO(3)  前收盘价 即时行情数据 期货和期权品种为昨结算价
```

### DYNAINFO(4) 开盘价

```pascal
DYNAINFO(4)  开盘价 即时行情数据 在开盘前,值为0,在使用时需要判断
```

### DYNAINFO(5) 最高价

```pascal
DYNAINFO(5)  最高价 即时行情数据 在开盘前,值为0,在使用时需要判断
```

### DYNAINFO(6) 最低价

```pascal
DYNAINFO(6)  最低价 即时行情数据 在开盘前,值为0,在使用时需要判断
```

### DYNAINFO(7) 现价

```pascal
DYNAINFO(7)  现价 即时行情数据 在开盘前,值为0,在使用时需要判断
```

### DYNAINFO(8) 总量

```pascal
DYNAINFO(8) 总量 即时行情数据
```

### DYNAINFO(9) 现量

```pascal
DYNAINFO(9) 现量 即时行情数据
```

### DYNAINFO(10) 总金额

```pascal
DYNAINFO(10)  总金额 即时行情数据
```

### DYNAINFO(11) 均价

```pascal
DYNAINFO(11) 均价 即时行情数据
```

### DYNAINFO(12) 日涨跌

```pascal
DYNAINFO(12) 日涨跌 即时行情数据
```

### DYNAINFO(13) 振幅

```pascal
DYNAINFO(13) 振幅 即时行情数据 转换成幅度需要乘100
```

### DYNAINFO(14) 涨幅

```pascal
DYNAINFO(14) 涨幅 即时行情数据 转换成幅度需要乘100
```

### DYNAINFO(15) 开盘金额

```pascal
DYNAINFO(15) 开盘时的成交金额 即时行情数据
```

### DYNAINFO(16) 前 5 日每分钟均量

```pascal
DYNAINFO(16) 前5日每分钟均量 盘中不变化
```

### DYNAINFO(17) 量比

```pascal
DYNAINFO(17) 量比 即时行情数据
```

### DYNAINFO(18) 上涨家数

```pascal
DYNAINFO(18) 上涨家数(对沪深指数和通达信板块指数有效) 即时行情数据
```

### DYNAINFO(19) 下跌家数

```pascal
DYNAINFO(19) 下跌家数(对沪深指数和通达信板块指数有效) 即时行情数据
```

### DYNAINFO(20) 买价(即买一价)

```pascal
DYNAINFO(20)  最新买价 即时行情数据
```

### DYNAINFO(21) 卖价(即卖一价)

```pascal
DYNAINFO(21)  最新卖价 即时行情数据
```

### DYNAINFO(22) 内盘

```pascal
DYNAINFO(22) 返回内盘 即时行情数据
```

### DYNAINFO(23) 外盘

```pascal
DYNAINFO(23) 返回外盘 即时行情数据
```

### SELLVOL 内盘

```pascal
返回内盘,即DYNAINFO(22) 即时行情数据
```

### BUYVOL 外盘

```pascal
返回外盘,即DYNAINFO(23) 即时行情数据
```

### DYNAINFO(24) 涨速

```pascal
DYNAINFO(24) 返回涨速 即时行情数据 转换成幅度需要乘100
```

### DYNAINFO(25) 几分钟前的价格

```pascal
DYNAINFO(25) 返回几分钟前的价格,周期由涨速周期决定,一般为5分钟 即时行情数据
```

### DYNAINFO(37) 换手率

```pascal
DYNAINFO(37) 换手率 转换成幅度需要乘100 比如DYNAINFO(37)>0.25表示换手超过25%
```

### DYNAINFO(38) 市盈(静)

```pascal
DYNAINFO(38) 静态市盈率 沪深,港股和美股品种等有效
```

### DYNAINFO(39) 市盈(动)

```pascal
DYNAINFO(39) 动态市盈率 即时行情数据 沪深品种有效
```

### DYNAINFO(40) 市盈(TTM)

```pascal
DYNAINFO(40) 市盈率(根据最近12个月的每股收益得到的市盈率) 即时行情数据 沪深品种有效
```

### DYNAINFO(49) 成交方向

```pascal
DYNAINFO(49) 成交方向 即时行情数据 0:主动买 1:主动卖 2:中性单
```

### DYNAINFO(50) 采样点数(分笔数)

```pascal
DYNAINFO(50)  采样点数,即分时成交明细个数,相当于报价中的活跃度 即时行情数据
```

### DYNAINFO(51) 内外比

```pascal
DYNAINFO(51) 内外比 即时行情数据
```

### DYNAINFO(52) 港股资金流向

```pascal
DYNAINFO(52) 港股资金流向 单位为万 即时行情数据
```

### DYNAINFO(57) 笔涨跌

```pascal
DYNAINFO(57) 笔涨跌 即时行情数据
```

### DYNAINFO(58) 买量(即买一量)

```pascal
DYNAINFO(58)  最新叫买量 即时行情数据
```

### DYNAINFO(59) 卖量(即卖一量)

```pascal
DYNAINFO(59)  最新叫卖量 即时行情数据
```

### DYNAINFO(60) 沪深总上涨家数

```pascal
DYNAINFO(60) 沪深总上涨家数 即时行情数据
```

### DYNAINFO(61) 沪深总下跌家数

```pascal
DYNAINFO(61) 沪深总下跌家数 即时行情数据
```

### DYNAINFO(62) 沪深总成交金额

```pascal
DYNAINFO(62) 沪深总成交金额 即时行情数据
```

### ISBUYORDER 主动性买单

```pascal
返回当前成交是否为主动性买单.
用法:
 ISBUYORDER
 当本笔成交为主动性买盘时,返回1,否则为0
```

### BETAVALUE 贝塔系数

```pascal
返回当前品种的贝塔系数
```

## 线形和资源等

### COLOR 自定义色

```pascal
格式为COLOR+“BBGGRR”：BB、GG、RR表示蓝色、绿色和红色的分量，每种颜色的取值范围是00-FF，采用了16进制。
例如：MA5:MA(CLOSE,5)，COLOR00FFFF表示纯红色与纯绿色的混合色：COLOR808000表示淡蓝色和淡绿色的混合色。
```

### COLORBLACK 黑色

```pascal
画黑色
```

### COLORBLUE 蓝色

```pascal
画蓝色
```

### COLORGREEN 绿色

```pascal
画绿色
```

### COLORCYAN 青色

```pascal
画青色
```

### COLORRED 红色

```pascal
画红色
```

### COLORMAGENTA 洋红色

```pascal
画洋红色
```

### COLORBROWN 棕色

```pascal
画棕色
```

### COLORLIGRAY 淡灰色

```pascal
画淡灰色
```

### COLORGRAY 深灰色

```pascal
画深灰色
```

### COLORLIBLUE 淡蓝色

```pascal
画淡蓝色
```

### COLORLIGREEN 淡绿色

```pascal
画淡绿色
```

### COLORLICYAN 淡青色

```pascal
画淡青色
```

### COLORLIRED 淡红色

```pascal
画淡红色
```

### COLORLIMAGENTA 淡洋红色

```pascal
画淡洋红色
```

### COLORYELLOW 黄色

```pascal
画黄色
```

### COLORWHITE 白色

```pascal
画白色
```

### LINETHICK 线形粗细

```pascal
格式“LINETHICK+(1-9)”；
参数的取值范围在1—9之间，“LINETHICK1”表示最细的线，而“LINETHICK9”表示最粗的线；
```

### DRAWABOVE 显示在位置之上

```pascal
显示在位置之上,对于DRAWTEXT和DRAWNUMBER等函数有用,放在语句的最后面(不能与LINETHICK等函数共用),比如:
  DRAWNUMBER(CLOSE>OPEN,HIGH,CLOSE),DRAWABOVE;
```

### NOFRAME 不显示边框

```pascal
不显示边框,对于DRAWRECTREL等函数有用,放在语句的最后面
```

### STICK 柱状线

```pascal
画柱状线
```

### COLORSTICK 彩色柱状线

```pascal
彩色柱状线。数据为正数时，向上画红色柱状线，反之向下画绿线
```

### VOLSTICK 成交量柱状线

```pascal
成交量柱状线。当股价上涨时显示红色空心柱，反之则显示绿色实心柱
```

### LINESTICK 同时画出柱状线和指标线

```pascal
同时画出柱状线和指标线
```

### CROSSDOT 小叉线

```pascal
画小叉线
```

### CIRCLEDOT 小圆圈线

```pascal
画小圆圈线
```

### POINTDOT 小圆点线

```pascal
画小圆点线
```

### DOTLINE 虚线

```pascal
画虚线
```

### NODRAW 空线条

```pascal
不画该线
```

### PLAYSOUND1 播放 1 号

```pascal
播放1号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND2 播放 2 号

```pascal
播放2号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND3 播放 3 号

```pascal
播放3号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND4 播放 4 号

```pascal
播放4号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND5 播放 5 号

```pascal
播放5号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND6 播放 6 号

```pascal
播放6号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND7 播放 7 号

```pascal
播放7号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND8 播放 8 号

```pascal
播放8号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND9 播放 9 号

```pascal
播放9号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND10 播放 10 号

```pascal
播放10号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND11 播放 11 号

```pascal
播放11号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND12 播放 12 号

```pascal
播放12号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND13 播放 13 号

```pascal
播放13号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND14 播放 14 号

```pascal
播放14号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND15 播放 15 号

```pascal
播放15号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND16 播放 16 号

```pascal
播放16号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND17 播放 17 号

```pascal
播放17号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND18 播放 18 号

```pascal
播放18号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND19 播放 19 号

```pascal
播放19号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### PLAYSOUND20 播放 20 号

```pascal
播放20号
声音和动画在[插入资源]中设置
最后一个数据满足条件后播放(只播放一次)
```

### NOTEXT 不显示输出线数据

```pascal
输出线名称前带有NOTEXT字样时,不显示输出线数据
```

### ??MOVE? 指标线向后偏移 N 个单位

```pascal
输出线名称中带有MOVE字段时,比如TMPMOVE3,表示整个输出线向后偏移3个单位,画线进入未来时间,N不应超过4 注:使用MOVE后,不能再使用线型
```

### ??MOVER? 指标线向前偏移 N 个单位

```pascal
输出线名称中带有MOVE字段时,比如TMPMOVER3,表示整个输出线向前偏移3个单位,注:使用MOVER后,不能再使用线型
```

## 操作符

### + 加

```pascal
例如: X + Y
```

### - 减

```pascal
例如: X - Y
```

### \* 乘

```pascal
例如: X * Y
```

### / 除

```pascal
例如: X / Y
```

### < 小于

```pascal
例如: X < Y
```

### > 大于

```pascal
例如: X > Y
```

### <= 小于等于

```pascal
例如: X <= Y
```

### >= 大于等于

```pascal
例如: X >= Y
```

### = 等于

```pascal
例如: X = Y
```

### != 不等于

```pascal
例如: X != Y
```

### <> 不等于

```pascal
与!=的用法一样
```

### { 注释符号

```pascal
例如 {注释部分}
```

### AND 并且

```pascal
例如: X>Y AND Y>Z
```

### OR 或者

```pascal
例如: X>Y OR Y>Z
```

### && 并且

```pascal
与AND的用法一样
```

### || 或者

```pascal
与OR的用法一致
```

### \$ 引用特定数据

```pascal
例如:"000014$CLOSE",表示取000014的收盘价,注意加入双引号.
可在前面加SZ(深市),SH(沪市),或市场_,,"SZ000001$CLOSE"表示平安银行,"47_IFL8$CLOSE"表示沪深主力合约,

注意:引用品种的对应周期的数据必须要先下载到本地
```

### ( 括号

```pascal
例如:HIGH/(CLOSE+OPEN)
```

### ) 反括号

```pascal
例如:HIGH/(CLOSE+OPEN)
```

### , 逗号

```pascal
例如: MA(CLOSE,3)
```

### : 输出

```pascal
例如: 输出:CLOSE+OPEN
```

### := 赋值

```pascal
例如: 变量1:=HIGH
```

### " 双引号

```pascal
例如:"000014$CLOSE",表示取000014的收盘价
```

### . 引用指标输出

```pascal
例如: KDJ.K 表示输入KDJ指标的K输出值
```

### ; 分号

```pascal
例如: A:=CLOSE;
```

### # 跨周期引用符号

```pascal
#后可用MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR

例如:TMP1:=CLOSE#WEEK;
{非指标引用时只可用于OPEN,HIGH,LOW,CLOSE,VOL,AMOUNT,VOLINSTK等,当前周期不支持多秒线,多分钟线和多日线,并且引用周期必须要高于当前周期,5秒线只支持引用1分钟线和5分钟线}
TMP2:=KDJ.K#WEEK;
{跨周期指标引用,引用品种的对应周期的数据必须要先下载到本地}
跨周期指标引用不支持带参数
提示:跨周期时,可能会引用到未来数据
```

### MIN1 引用 1 分钟线

```pascal
用于跨周期1分钟线引用
```

### MIN5 引用 5 分钟线

```pascal
用于跨周期5分钟线引用
```

### MIN15 引用 15 分钟线

```pascal
用于跨周期15分钟线引用
```

### MIN30 引用 30 分钟线

```pascal
用于跨周期30分钟线引用
```

### MIN60 引用 60 分钟线

```pascal
用于跨周期60分钟线引用
```

### WEEK 引用周线

```pascal
用于跨周期周线引用
```

### SEASON 引用季线

```pascal
用于跨周期季线引用
```

## 交易信号函数

### BUY 买入开仓

```pascal
多头建仓(买入开仓).
参数1为触发条件,参数2为标记放置位置.

例如:
 BUY(CROSS(A,B),LOW),当A上穿B时,在LOW处画标记,同时突出提示或直接下单,如果LOW改为DRAWNULL,就不画标记.(分时图上不支持)
```

### SELL 卖出平仓

```pascal
多头平仓(卖出平仓).
参数1为触发条件,参数2为标记放置位置.

例如:
 SELL(CROSS(A,B),HIGH),当A上穿B时,在HIGH处画标记,同时突出提示或直接下单,如果HIGH改为DRAWNULL,就不画标记.(分时图上不支持)
```

### SELLSHORT 卖出开仓

```pascal
空头建仓(卖出开仓).
参数1为触发条件,参数2为标记放置位置.

例如:
 SELLSHORT(CROSS(A,B),HIGH),当A上穿B时,在HIGH处画标记,同时突出提示或直接下单,如果HIGH改为DRAWNULL,就不画标记.(分时图上不支持)
```

### BUYSHORT 买入平仓

```pascal
空头平仓(买入平仓).
参数1为触发条件,参数2为标记放置位置.

例如:
 BUYSHORT(CROSS(A,B),LOW),当A上穿B时,在LOW处画标记,同时突出提示或直接下单,如果LOW改为DRAWNULL,就不画标记.(分时图上不支持)
```

### BUYSHORT_BUY 先平空仓再开多仓

```pascal
先平空仓再开多仓.
参数1为触发条件,参数2为标记放置位置.

例如:
 BUYSHORT_BUY(CROSS(A,B),LOW),当A上穿B时,在LOW处画标记,同时突出提示或直接下单,如果LOW改为DRAWNULL,就不画标记.(分时图上不支持)

独立池时,反手时平掉所有的原来仓位
```

### SELL_SELLSHORT 先平多仓再开空仓

```pascal
先平多仓再开空仓.
参数1为触发条件,参数2为标记放置位置.

例如:
 SELL_SELLSHORT(CROSS(A,B),HIGH),当A上穿B时,在HIGH处画标记,同时突出提示或直接下单,如果HIGH改为DRAWNULL,就不画标记.(分时图上不支持)

独立池时,反手时平掉所有的原来仓位
```

### CLOSEALLD 清多头仓

```pascal
平掉所有多头仓位.
参数1为触发条件,参数2为标记放置位置.

例如:
 CLOSEALLD(CROSS(A,B),HIGH),当A上穿B时,在HIGH处画标记,同时突出提示或直接下单,如果HIGH改为DRAWNULL,就不画标记.(分时图上不支持)
```

### CLOSEALLK 清空头仓

```pascal
平掉所有空头仓位.
参数1为触发条件,参数2为标记放置位置.

例如:
 CLOSEALLK(CROSS(A,B),LOW),当A上穿B时,在LOW处画标记,同时突出提示或直接下单,如果LOW改为DRAWNULL,就不画标记.(分时图上不支持)
```

### AUTOFILTER 自动过滤交易信号

```pascal
对交易信号(BUY,SELL,SELLSHORT,BUYSHORT,BUYSHORT_BUY,SELL_SELLSHORT,CLOSEALLD,CLOSEALLK等)按照开平配对原则过滤.

1.连续的同方向指令只有第一个有效,其他的将被过滤;
2.交易信号必须配对出现(比如前面已经有了买开指令,则后面只允许出现卖平指令,其他的指令都被过滤掉)

注:使用AUTOFILTER后,就不要再使用其它的信号过滤方式了
```

### ISLASTBUY 上个信号是否买入开仓

```pascal
上个信号是否买入开仓

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### ISLASTSELL 上个信号是否卖出平仓

```pascal
上个信号是否卖出平仓

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### ISLASTSELLSHORT 上个信号是否卖出开仓

```pascal
上个信号是否卖出开仓

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### ISLASTBUYSHORT 上个信号是否买入平仓

```pascal
上个信号是否买入平仓

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### LASTSIGNAL 上一次的信号类型

```pascal
上一次的信号类型
1:买入开仓 2:卖出平仓 3:卖出开仓 4:买入平仓 7:清多头仓 8:清空头仓

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### BUYPRICE 买入开仓信号时的价格

```pascal
买入开仓信号时的价格,当时数据品种的K线的收盘价

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### BUYBARS 买入开仓信号距离当前 k 线数

```pascal
买入开仓信号距离当前k线数

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### SELLSHORTPRICE 卖出开仓信号时的价格

```pascal
卖出开仓信号时的价格,当时数据品种的K线的收盘价

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### SELLSHORTBARS 卖出开仓信号距离当前 k 线数

```pascal
卖出开仓信号距离当前k线数

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### SELLPRICE 卖出平仓信号时的价格

```pascal
卖出平仓信号时的价格,当时数据品种的K线的收盘价

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### SELLBARS 卖出平仓信号距离当前 K 线数

```pascal
卖出平仓信号距离当前K线数

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### BUYSHORTPRICE 买入平仓信号时的价格

```pascal
买入平仓信号时的价格,当时数据品种的K线的收盘价

(此函数会逐K线计算,请勿与未来函数同时使用)
```

### BUYSHORTBARS 买入平仓信号距离当前 K 线数

```pascal
买入平仓信号距离当前K线数

(此函数会逐K线计算,请勿与未来函数同时使用)
```

## 帐户函数

### BUYPOSITION 买持仓

```pascal
买持仓的数量(期货),针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### TODAYBUY 今买持仓

```pascal
今日买入持仓的数量(期货),针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### BUYAVGPRICE 买均价

```pascal
买持仓的持仓均价(期货),针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### BUYPROFITLOSS 买持仓盈利

```pascal
买持仓的浮动盈亏(期货),针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### SELLPOSITION 卖持仓

```pascal
卖持仓的数量(期货),针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### TODAYSELL 今卖持仓

```pascal
今日卖出持仓的数量(期货),针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### SELLAVGPRICE 卖均价

```pascal
卖持仓的持仓均价(期货),针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### SELLPROFITLOSS 卖持仓盈利

```pascal
卖持仓的浮动盈亏(期货),针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### TOTALPOSITION 总持仓

```pascal
总持仓,针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### CANUSEPOSITION 总可用持仓

```pascal
总可用的持仓,针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### TOTALAVGPRICE 总持仓均价

```pascal
总持仓均价,针对当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### FREEMONEY 总可用资金量

```pascal
总可用资金量,针对当前交易帐户

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### CURRENTEQUITY 动态权益

```pascal
动态权益(期货),针对当前交易帐户

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### PREVIOUSEQUITY 昨日结存权益

```pascal
昨日结存的权益(期货),针对当前交易帐户

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### PROFITLOSS 持仓盈亏

```pascal
持仓盈亏(期货),针对当前交易帐户的当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### CLOSEPROFIT 平仓盈亏

```pascal
平仓盈亏(期货),针对当前交易帐户的当前品种

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### TOTALMARGIN 持仓保证金

```pascal
持仓保证金(期货),针对当前交易帐户

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### FEERATE 合约手续费

```pascal
合约手续费比例(百分比),(具体交易策略中设置)

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```

### MARGINRATE 合约保证金

```pascal
合约保证金比例(百分比),(具体交易策略中设置)

(两种情况下支持:1.策略交易时,2.程序交易评测时配合交易函数使用)
```
